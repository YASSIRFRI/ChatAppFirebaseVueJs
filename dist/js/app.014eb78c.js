(function(){"use strict";var e={1564:function(e,t,s){var i=s(5130),a=s(6768);function o(e,t,s,i,o,r){const n=(0,a.g2)("RouterView"),l=(0,a.g2)("b-container");return(0,a.uX)(),(0,a.Wv)(l,{class:"container"},{default:(0,a.k6)((()=>[(0,a.bF)(n)])),_:1})}var r={data(){return{showModal:!1}},mounted(){},beforeDestroy(){},methods:{handleBeforeUnload(e){},handleLeave(){this.showModal=!1,window.removeEventListener("beforeunload",this.handleBeforeUnload)},cancelLeave(){this.showModal=!1}}},n=s(1241);const l=(0,n.A)(r,[["render",o]]);var d=l,c=s(1387);function u(e,t,s,i,o,r){const n=(0,a.g2)("b-col"),l=(0,a.g2)("b-row"),d=(0,a.g2)("list"),c=(0,a.g2)("welcomePage"),u=(0,a.g2)("listmodal"),h=(0,a.g2)("b-modal"),g=(0,a.gN)("b-tooltip");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(l,{class:"d-xl-none mb-3"},{default:(0,a.k6)((()=>[(0,a.bF)(l,{style:{display:"flex","flex-direction":"column"}},{default:(0,a.k6)((()=>[(0,a.bo)(((0,a.uX)(),(0,a.Wv)(n,{title:"show contacts list",style:{cursor:"pointer","margin-right":"15px","margin-left":"20px","margin-top":"20px"}},{default:(0,a.k6)((()=>[(0,a.Lk)("i",{onClick:t[0]||(t[0]=e=>o.showList=!0),class:"bi bi-chat-fill",style:{"font-size":"1.8rem"}})])),_:1})),[[g,void 0,void 0,{hover:!0}]])])),_:1})])),_:1}),(0,a.bF)(l,{style:{height:"90vh",width:"100%"}},{default:(0,a.k6)((()=>[(0,a.bF)(n,{cols:"3",style:{height:"100%"},class:"animated-flex d-none d-xl-block"},{default:(0,a.k6)((()=>[(0,a.bF)(d,{chats:o.chats,profileimagelink:o.user.profileImageUrl,username:o.user.username},null,8,["chats","profileimagelink","username"])])),_:1}),(0,a.bF)(n,{cols:"12",xl:"9",class:"ooo"},{default:(0,a.k6)((()=>[(0,a.bF)(c)])),_:1})])),_:1}),(0,a.bF)(h,{id:"list-modal",size:"lg","hide-footer":"",modelValue:o.showList,"onUpdate:modelValue":t[1]||(t[1]=e=>o.showList=e),onHidden:r.resetModal,centered:"",class:"slide-in"},{"modal-title":(0,a.k6)((()=>[(0,a.eW)(" List ")])),default:(0,a.k6)((()=>[(0,a.bF)(u,{chats:o.chats,profileimagelink:o.user.profileImageUrl,username:o.user.username},null,8,["chats","profileimagelink","username"])])),_:1},8,["modelValue","onHidden"])],64)}s(4114);var h=s(4232);const g=e=>((0,a.Qi)("data-v-0d51a9e7"),e=e(),(0,a.jt)(),e),p={class:"chat"},m={class:"top"},f={class:"user"},b={class:"profile-container"},v=["src"],k=["src"],w={class:"texts"},y={key:0},C={key:1},A={key:2},L={key:3},I={class:"icons"},x={class:"center"},F=["src"],U={class:"text"},E=["onClick","src"],P=["onClick"],Q=g((()=>(0,a.Lk)("span",{style:{cursor:"pointer"}},[(0,a.eW)("Image "),(0,a.Lk)("i",{class:"bi bi-download"})],-1))),R=["src"],X={class:"text"},H={class:"time"},M=["src"],_=["onClick"],W={class:"time"},D=["onClick"],T=g((()=>(0,a.Lk)("i",{class:"bi bi-download"},null,-1))),G={ref:"targetscroll"},Z={class:"bottom"},j={class:"icons"},V=g((()=>(0,a.Lk)("label",{for:"image-input",style:{cursor:"pointer"}},[(0,a.Lk)("i",{class:"bi bi-image",style:{"font-size":"1.6rem"}})],-1))),z=g((()=>(0,a.Lk)("label",{for:"file-input",style:{cursor:"pointer"}},[(0,a.Lk)("i",{class:"bi bi-paperclip",style:{"font-size":"1.6rem"}})],-1))),S={class:"emoji"},J=g((()=>(0,a.Lk)("div",{style:{display:"flex",gap:"20px","font-weight":"bolder"}},[(0,a.Lk)("i",{class:"bi bi-send",style:{"font-size":"1.5rem"}})],-1)));function Y(e,t,s,o,r,n){const l=(0,a.g2)("FilePreview"),d=(0,a.g2)("b-button"),c=(0,a.g2)("loadingPage"),u=(0,a.g2)("detail"),g=(0,a.g2)("b-modal");return(0,a.uX)(),(0,a.CE)("div",p,[(0,a.Lk)("div",m,[(0,a.Lk)("div",f,[(0,a.Lk)("div",b,["discussion"===r.chatdata.type?((0,a.uX)(),(0,a.CE)("img",{key:0,src:r.chatdata.friend.profileImageUrl,alt:""},null,8,v)):(0,a.Q3)("",!0),"group"===r.chatdata.type?((0,a.uX)(),(0,a.CE)("img",{key:1,src:r.chatdata.groupicon,alt:""},null,8,k)):(0,a.Q3)("",!0),"discussion"===r.chatdata.type?((0,a.uX)(),(0,a.CE)("div",{key:2,class:(0,h.C4)({"online-indicator":r.friendstatus,"offline-indicator":!r.friendstatus})},null,2)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",w,["discussion"===r.chatdata.type?((0,a.uX)(),(0,a.CE)("span",y,(0,h.v_)(r.chatdata.friend.username),1)):(0,a.Q3)("",!0),"group"===r.chatdata.type?((0,a.uX)(),(0,a.CE)("span",C,(0,h.v_)(r.chatdata.groupname),1)):(0,a.Q3)("",!0),"discussion"===r.chatdata.type&&r.friendstatus?((0,a.uX)(),(0,a.CE)("p",A,"Online")):(0,a.Q3)("",!0),"discussion"!==r.chatdata.type||r.friendstatus?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("p",L,"Offline"))])]),(0,a.Lk)("div",I,[(0,a.Lk)("i",{onClick:t[0]||(t[0]=e=>r.showDetail=!0),class:"bi bi-info-circle",style:{cursor:"pointer","font-size":"1.5rem"}})])]),(0,a.Lk)("div",x,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.messages,((e,t)=>((0,a.uX)(),(0,a.CE)(a.FK,{key:t},["image"===e.type?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,h.C4)({message:e.author!==r.currentuser,message_own:e.author===r.currentuser,file:!1,photo:!0})},[e.author!==r.currentuser?((0,a.uX)(),(0,a.CE)("img",{key:0,src:e.profileImageUrl,alt:""},null,8,F)):(0,a.Q3)("",!0),(0,a.Lk)("div",U,[(0,a.Lk)("img",{onClick:t=>n.downloadFile(e.content),src:e.content,alt:"",style:{cursor:"pointer"}},null,8,E),(0,a.Lk)("p",null,(0,h.v_)(e.messagecontent),1),(0,a.Lk)("span",{onClick:t=>n.downloadFile(e.content),style:{display:"flex","align-items":"end",gap:"5px"},class:"time"},[(0,a.eW)((0,h.v_)(n.formatTimeAgo(e.senttime))+" ",1),Q],8,P)])],2)):(0,a.Q3)("",!0),"text"===e.type?((0,a.uX)(),(0,a.CE)("div",{key:1,class:(0,h.C4)({message:e.author!==r.currentuser,message_own:e.author===r.currentuser,file:!1,photo:!1})},[e.author!==r.currentuser?((0,a.uX)(),(0,a.CE)("img",{key:0,src:e.profileImageUrl,alt:""},null,8,R)):(0,a.Q3)("",!0),(0,a.Lk)("div",X,[(0,a.Lk)("pre",null,(0,h.v_)(e.content),1),(0,a.Lk)("span",H,(0,h.v_)(n.formatTimeAgo(e.senttime)),1)])],2)):(0,a.Q3)("",!0),"file"===e.type?((0,a.uX)(),(0,a.CE)("div",{key:2,class:(0,h.C4)({message:e.author!==r.currentuser,message_own:e.author===r.currentuser,file:!0,photo:!1})},[e.author!==r.currentuser?((0,a.uX)(),(0,a.CE)("img",{key:0,src:e.profileImageUrl,alt:""},null,8,M)):(0,a.Q3)("",!0),(0,a.Lk)("div",{onClick:t=>n.downloadFile(e.content),class:"text",style:{cursor:"pointer"}},[(0,a.Lk)("pre",null,(0,h.v_)(e.filename),1),(0,a.Lk)("span",W,(0,h.v_)(n.formatTimeAgo(e.senttime)),1)],8,_),(0,a.Lk)("span",{onClick:t=>n.downloadFile(e.content),style:{cursor:"pointer",display:"flex","align-items":"end",gap:"5px"},class:"time"},[(0,a.eW)("File "),T],8,D)],2)):(0,a.Q3)("",!0)],64)))),128)),(0,a.Lk)("div",G,null,512)]),(0,a.bF)(l,{files:r.selectedFiles,onRemoveFile:n.removeFile},null,8,["files","onRemoveFile"]),(0,a.Lk)("div",Z,[(0,a.Lk)("div",j,[V,z,(0,a.Lk)("input",{id:"file-input",type:"file",onChange:t[1]||(t[1]=(...e)=>n.handleFileChange&&n.handleFileChange(...e)),multiple:"",hidden:""},null,32),(0,a.Lk)("input",{id:"image-input",accept:"image/*",type:"file",onChange:t[2]||(t[2]=(...e)=>n.handleFileChange&&n.handleFileChange(...e)),multiple:"",hidden:""},null,32)]),(0,a.bo)((0,a.Lk)("textarea",{ref:"myInput","onUpdate:modelValue":t[3]||(t[3]=e=>r.text=e),placeholder:"Type a message ..."},null,512),[[i.Jo,r.text]]),(0,a.Lk)("div",S,[(0,a.Lk)("i",{onClick:t[4]||(t[4]=(...e)=>n.toggleEmojiPicker&&n.toggleEmojiPicker(...e)),class:"bi bi-emoji-smile-fill",style:{cursor:"pointer","font-size":"1.8rem"}})]),(0,a.bF)(d,{class:"efoiwnefoiwefoiwnef",onClick:n.send},{default:(0,a.k6)((()=>[J])),_:1},8,["onClick"])]),r.loading?((0,a.uX)(),(0,a.Wv)(c,{key:0,progress:r.progr},null,8,["progress"])):(0,a.Q3)("",!0),(0,a.bF)(g,{id:"detail-modal",size:"lg","hide-footer":"",modelValue:r.showDetail,"onUpdate:modelValue":t[5]||(t[5]=e=>r.showDetail=e),onHidden:t[6]||(t[6]=e=>r.showDetail=!1),centered:"",class:"slide-in"},{"modal-title":(0,a.k6)((()=>[(0,a.eW)("Detail")])),default:(0,a.k6)((()=>[(0,a.bF)(u,{data:r.chatdata,mess:r.messages},null,8,["data","mess"])])),_:1},8,["modelValue"])])}var O=s(7666);const B=e=>((0,a.Qi)("data-v-2cbc1aea"),e=e(),(0,a.jt)(),e),q={key:0,class:"container-fluid detail"},N={class:"user text-center mb-3"},K=["src"],$={key:0},ee={class:"info"},te={class:"d-flex justify-content-between align-items-center"},se=B((()=>(0,a.Lk)("h5",{class:"mb-0"},"Add Member",-1))),ie=B((()=>(0,a.Lk)("small",{id:"tags-remove-on-delete-help",class:"form-text text-muted"},[(0,a.eW)(" Press "),(0,a.Lk)("kbd",null,"Backspace"),(0,a.eW)(" to remove the last username entered ")],-1))),ae={class:"d-flex justify-content-center mt-3"},oe={class:"d-flex justify-content-between align-items-center"},re=B((()=>(0,a.Lk)("h5",{class:"mb-0"},"Shared Photos",-1))),ne={class:"photos"},le=["src"],de=B((()=>(0,a.Lk)("i",{class:"bi bi-download"},null,-1)));function ce(e,t,s,i,o,r){const n=(0,a.g2)("b-button"),l=(0,a.g2)("b-card-header"),d=(0,a.g2)("b-form-tags"),c=(0,a.g2)("b-collapse"),u=(0,a.g2)("b-card"),g=(0,a.g2)("loadingPage"),p=(0,a.gN)("b-toggle");return(0,a.uX)(),(0,a.CE)(a.FK,null,[o.chatdata&&o.chatdata.id?((0,a.uX)(),(0,a.CE)("div",q,[(0,a.Lk)("div",N,[(0,a.Lk)("img",{src:"discussion"===o.chatdata.type?o.chatdata.friend.profileImageUrl:o.chatdata.groupicon,alt:"",class:"user-img mb-2"},null,8,K),(0,a.Lk)("h2",null,(0,h.v_)("discussion"===o.chatdata.type?o.chatdata.friend.username:o.chatdata.groupname),1),"discussion"===o.chatdata.type?((0,a.uX)(),(0,a.CE)("p",$,(0,h.v_)(o.chatdata.friend.description),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",ee,[o.chatdata.admin===o.uuusers?((0,a.uX)(),(0,a.Wv)(u,{key:0,"no-body":"",class:"mb-3"},{default:(0,a.k6)((()=>[(0,a.bF)(l,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",te,[se,(0,a.bo)(((0,a.uX)(),(0,a.Wv)(n,{variant:"link",class:"p-0"},{default:(0,a.k6)((()=>[(0,a.Lk)("i",{class:(0,h.C4)(["bi",e.expanded?"bi-chevron-bar-up":"bi-chevron-bar-down"])},null,2)])),_:1})),[[p,void 0,void 0,{"detail-add-member":!0}]])])])),_:1}),(0,a.bF)(c,{id:"detail-add-member","is-nav":""},{default:(0,a.k6)((()=>[(0,a.bF)(d,{ref:"ooo","input-id":"tags-remove-on-delete","input-attrs":{"aria-describedby":"tags-remove-on-delete-help"},modelValue:o.groupMember,"onUpdate:modelValue":t[0]||(t[0]=e=>o.groupMember=e),"tag-validator":r.Validate,separator:" ",placeholder:"Enter new username separated by space","remove-on-delete":"","no-add-on-enter":"",class:"search-input mb-2",onKeyup:r.handleTagState},null,8,["modelValue","tag-validator","onKeyup"]),ie,(0,a.Lk)("div",ae,[(0,a.bF)(n,{onClick:r.invite,variant:"success",class:"w-100"},{default:(0,a.k6)((()=>[(0,a.eW)("Invite +")])),_:1},8,["onClick"])])])),_:1})])),_:1})):(0,a.Q3)("",!0),(0,a.bF)(u,{"no-body":"",class:"mb-3"},{default:(0,a.k6)((()=>[(0,a.bF)(l,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",oe,[re,(0,a.bo)(((0,a.uX)(),(0,a.Wv)(n,{variant:"link",class:"p-0"},{default:(0,a.k6)((()=>[(0,a.Lk)("i",{class:(0,h.C4)(["bi",e.expanded?"bi-chevron-bar-up":"bi-chevron-bar-down"])},null,2)])),_:1})),[[p,void 0,void 0,{"detail-photos":!0}]])])])),_:1}),(0,a.bF)(c,{id:"detail-photos","is-nav":""},{default:(0,a.k6)((()=>[(0,a.Lk)("div",ne,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.filteredimages,((e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:t,class:"d-flex align-items-center mb-2"},[(0,a.Lk)("img",{src:e.content,alt:"",class:"shared-photo mr-3"},null,8,le),(0,a.Lk)("span",null,(0,h.v_)(e.filename),1),(0,a.bF)(n,{onClick:t=>r.downloadFile(e.content),variant:"link",class:"ml-auto"},{default:(0,a.k6)((()=>[de])),_:2},1032,["onClick"])])))),128))])])),_:1})])),_:1}),"group"!==o.chatdata.type?((0,a.uX)(),(0,a.Wv)(n,{key:1,onClick:r.removefriend,variant:"danger",class:"w-100 mt-3"},{default:(0,a.k6)((()=>[(0,a.eW)(" Remove User ")])),_:1},8,["onClick"])):(0,a.Q3)("",!0),"group"===o.chatdata.type?((0,a.uX)(),(0,a.Wv)(n,{key:2,onClick:r.quitGroup,variant:"danger",class:"w-100 mt-3"},{default:(0,a.k6)((()=>[(0,a.eW)(" Quit Group ")])),_:1},8,["onClick"])):(0,a.Q3)("",!0)])])):(0,a.Q3)("",!0),o.loading?((0,a.uX)(),(0,a.Wv)(g,{key:1,progress:o.progr},null,8,["progress"])):(0,a.Q3)("",!0)],64)}var ue=s(6400),he=s(114),ge=s(7617),pe=s(7844);const me={apiKey:"AIzaSyCCyP-G6yPX1JxVFLxHjO0z5_rVTITFzVI",authDomain:"cschatapp-fd89c.firebaseapp.com",projectId:"cschatapp-fd89c",storageBucket:"cschatapp-fd89c.appspot.com",messagingSenderId:"1003868956693",appId:"1:1003868956693:web:65a04171eb02f425a6c61c",measurementId:"G-HHQCMXL7DH"},fe=(0,ue.Wp)(me),be=(0,he.xI)(fe),ve=(0,ge.aU)(fe),ke=(0,pe.c7)(fe);var we=s(6703),ye=s.n(we);const Ce=e=>((0,a.Qi)("data-v-78a49908"),e=e(),(0,a.jt)(),e),Ae={class:"loading-page"},Le=Ce((()=>(0,a.Lk)("div",{class:"loading-icon"},[(0,a.Lk)("i",{class:"bi bi-chat",style:{"font-size":"5rem"}})],-1))),Ie={class:"loading-bar-container"};function xe(e,t,s,i,o,r){return(0,a.uX)(),(0,a.CE)("div",Ae,[Le,(0,a.Lk)("div",Ie,[(0,a.Lk)("div",{class:"loading-bar",style:(0,h.Tr)({width:s.progress+"%"})},null,4)])])}var Fe={props:["progress"]};const Ue=(0,n.A)(Fe,[["render",xe],["__scopeId","data-v-78a49908"]]);var Ee=Ue,Pe={props:["data","mess"],components:{loadingPage:Ee},data(){return{all:[],purge:[],user:{},filteredfriends:[],chatdata:{id:null},messages:[],loading:!1,groupMember:[],progr:0,members:[],uuusers:be.currentUser.uid}},methods:{async fetch(){if(this.data&&null!==this.data.id){this.chatdata={...this.data},this.messages=this.mess,this.fetchusers();const e=(0,ge.rJ)(ve,"users"),t=await(0,ge.GG)(e);this.all=t.docs.map((e=>({id:e.id,...e.data()})));const s=(0,ge.H9)(ve,"users",be.currentUser.uid),i=(0,ge.H9)(ve,"chats",this.data.id),a=await(0,ge.aQ)(i,(async e=>{if(e.exists()){const t=e.data();if(t.id=e.id,"discussion"===t.type){let e,s;s=t.senders[0]===be.currentUser.uid?t.senders[1]:t.senders[0];const i=(0,ge.H9)(ve,"users",s),a=await(0,ge.x7)(i);a.exists()?e={...a.data(),id:a.id}:ye()({text:"Something went Wrong 2 ",duration:3e3,close:!0,gravity:"bottom",position:"right",backgroundColor:"red"}).showToast(),t.friend=e,this.chatdata=t}else this.chatdata=t,this.fetchusers()}else this.$router.push("/")})),o=await(0,ge.aQ)(s,(e=>{if(e.exists()){const t=e.data();this.user={...t,id:be.currentUser.uid},this.filteredfriends=this.all.filter((e=>this.user.friends.includes(e.id)&&!this.chatdata.senders.includes(e.id)))}else ye()({text:"Something went Wrong",duration:3e3,close:!0,gravity:"bottom",position:"right",backgroundColor:"red"}).showToast()}));this.purge.push(o),this.purge.push(a)}},async beforeUnmount(){this.purge.forEach((e=>e()))},async removefriend(){try{this.loading=!0,this.progr=5;const e=(0,ge.H9)(ve,"chats",this.chatdata.id),t=(0,ge.rJ)(e,"message"),s=(0,ge.H9)(ve,"users",be.currentUser.uid),i=(0,ge.H9)(ve,"users",this.chatdata.friend.id);if(await(0,ge.mZ)(i,{friends:(0,ge.C3)(be.currentUser.uid)}),await(0,ge.mZ)(s,{friends:(0,ge.C3)(this.chatdata.friend.id)}),await(0,ge.mZ)(i,{chats:(0,ge.C3)(this.chatdata.id)}),await(0,ge.mZ)(s,{chats:(0,ge.C3)(this.chatdata.id)}),this.progr=50,0!==[...this.filteredfiles,...this.filteredimages].length){const e=(0,pe.KR)(ke,`chats/${this.chatdata.id}/`),t=await(0,pe._w)(e),s=t.items.map((e=>(0,pe.XR)(e)));await Promise.all(s)}this.progr=80;const a=await(0,ge.GG)(t),o=a.docs.map((e=>(0,ge.kd)(e.ref)));await Promise.all(o),await(0,ge.kd)(e),this.progr=90,this.$router.push("/"),ye()({text:"Friend Removed from your list",duration:3e3,close:!0,gravity:"bottom",position:"right",backgroundColor:"orange"}).showToast()}catch(e){ye()({text:"Something went Wrong",duration:3e3,close:!0,gravity:"bottom",position:"right",backgroundColor:"red"}).showToast()}},downloadFile(e){window.open(e,"_blank")},async quitGroup(){try{if(1===this.chatdata.senders.length){this.loading=!0,this.progr=20;const e=(0,ge.H9)(ve,"users",be.currentUser.uid);if(await(0,ge.mZ)(e,{chats:(0,ge.C3)(this.chatdata.id)}),this.progr=50,0!==[...this.filteredfiles,...this.filteredimages].length){const e=(0,pe.KR)(ke,`chats/${this.chatdata.id}/`),t=await(0,pe._w)(e),s=t.items.map((e=>(0,pe.XR)(e)));await Promise.all(s)}const t=(0,pe.KR)(ke,`group/${this.chatdata.id}/`),s=await(0,pe._w)(t),i=s.items.map((e=>(0,pe.XR)(e)));await Promise.all(i),this.progr=80;const a=(0,ge.H9)(ve,"chats",this.chatdata.id),o=(0,ge.rJ)(a,"message"),r=await(0,ge.GG)(o),n=r.docs.map((e=>(0,ge.kd)(e.ref)));await Promise.all(n),await(0,ge.kd)(a),this.progr=90,this.$router.push("/"),ye()({text:"Friend Removed from your list",duration:3e3,close:!0,gravity:"bottom",position:"right",backgroundColor:"orange"}).showToast()}else{this.loading=!0,this.progr=5;const e=(0,ge.H9)(ve,"chats",this.chatdata.id),t=(0,ge.rJ)(e,"message"),s=(0,ge.H9)(ve,"users",be.currentUser.uid),i=(0,ge.H9)(ve,"chats",this.chatdata.id),a=await(0,ge.x7)(s),o=a.data().username,r=(0,ge.H9)(ve,"chats",this.chatdata.id),n=await(0,ge.x7)(r);(0,ge.mZ)(r,{currentId:n.data().currentId+1}),await(0,ge.gS)(t,{author:be.currentUser.uid,type:"text",senttime:ge.Dc.now(),filename:"",content:`${o} has left the Group`,unread:!0,readby:[],ID:n.data().currentId}),await(0,ge.mZ)(i,{senders:(0,ge.C3)(be.currentUser.uid)}),await(0,ge.mZ)(s,{chats:(0,ge.C3)(this.chatdata.id)}),this.progr=90,this.$router.push("/"),ye()({text:"Friend Removed from your list",duration:3e3,close:!0,gravity:"bottom",position:"right",backgroundColor:"orange"}).showToast()}}catch(e){ye()({text:"Something went Wrong",duration:3e3,close:!0,gravity:"bottom",position:"right",backgroundColor:"red"}).showToast()}},async fetchusers(){const e=[],t=this.chatdata.senders.map((async t=>{const s=(0,ge.H9)(ve,"users",t),i=await(0,ge.x7)(s);e.push({...i.data(),id:i.id})}));await Promise.all(t),this.members=e},Validate(e){const t=this.all.filter((t=>t.username===e));return 1===t.length&&this.user.friends.includes(t[0].id)&&![...this.groupMember].includes(t[0].username)&&!this.chatdata.senders.includes(t[0].id)},handleTagState(e){const t=e.target.value;this.searchtag=t,t?this.filteredfriends=this.all.filter((e=>{const s=e.username.toLowerCase();return s.includes(t.toLowerCase())&&this.user.friends.includes(e.id)&&![...this.groupMember].includes(e.username)&&!this.chatdata.senders.includes(e.id)})):(console.log([...this.groupMember]),this.filteredfriends=this.all.filter((e=>this.user.friends.includes(e.id)&&![...this.groupMember].includes(e.username)&&!this.chatdata.senders.includes(e.id))))},async invite(){const e=this.all.filter((e=>[...this.groupMember].includes(e.username))),t=e.map((async e=>{const t=(0,ge.H9)(ve,"users",e.id),s=(0,ge.H9)(ve,"chats",this.chatdata.id);await(0,ge.mZ)(t,{invitations:(0,ge.hq)({id:this.chatdata.id,type:"group"})}),await(0,ge.mZ)(s,{sentinvitations:(0,ge.hq)(e.id)})}));await Promise.all(t),ye()({text:"invitations Sent",duration:3e3,close:!0,gravity:"bottom",position:"right",backgroundColor:"green"}).showToast(),window.location.reload()},async removeuser(e){try{this.loading=!0,this.progr=5;const t=(0,ge.H9)(ve,"chats",this.chatdata.id),s=(0,ge.rJ)(t,"message"),i=(0,ge.H9)(ve,"users",e),a=(0,ge.H9)(ve,"chats",this.chatdata.id),o=await(0,ge.x7)(i),r=o.data().username,n=(0,ge.H9)(ve,"chats",this.chatdata.id),l=await(0,ge.x7)(n);(0,ge.mZ)(n,{currentId:l.data().currentId+1}),await(0,ge.gS)(s,{author:be.currentUser.uid,type:"text",senttime:ge.Dc.now(),filename:"",content:`${r} has been removed from this group`,unread:!0,readby:[],ID:l.data().currentId}),await(0,ge.mZ)(a,{senders:(0,ge.C3)(e)}),await(0,ge.mZ)(i,{chats:(0,ge.C3)(this.chatdata.id)}),this.progr=90,this.loading=!1,ye()({text:"user Removed from your group",duration:3e3,close:!0,gravity:"bottom",position:"right",backgroundColor:"orange"}).showToast(),window.location.reload()}catch(t){ye()({text:"Something went Wrong",duration:3e3,close:!0,gravity:"bottom",position:"right",backgroundColor:"red"}).showToast()}}},watch:{data:{handler:"fetch",immediate:!0},mess:{handler:"fetch",immediate:!0}},computed:{filteredfiles(){return null!==this.data.id?this.messages.filter((e=>"file"===e.type)):[]},filteredimages(){return null!==this.data.id?this.messages.filter((e=>"image"===e.type)):[]}}};const Qe=(0,n.A)(Pe,[["render",ce],["__scopeId","data-v-2cbc1aea"]]);var Re=Qe;const Xe={key:0,class:"file-preview"},He=["src"],Me={key:1,class:"file-name"},_e=["onClick"];function We(e,t,s,i,o,r){return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("input",{type:"file",onChange:t[0]||(t[0]=(...t)=>e.handleFileChange&&e.handleFileChange(...t)),multiple:"",hidden:""},null,32),s.files.length>0?((0,a.uX)(),(0,a.CE)("div",Xe,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.files,((e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:t,class:"file-item"},[e.type.startsWith("image/")?((0,a.uX)(),(0,a.CE)("img",{key:0,src:e.url,class:"file-image"},null,8,He)):((0,a.uX)(),(0,a.CE)("span",Me,(0,h.v_)(e.name),1)),(0,a.Lk)("button",{onClick:e=>r.removeFile(t),class:"remove-button"},"×",8,_e)])))),128))])):(0,a.Q3)("",!0)])}var De={props:["files"],methods:{removeFile(e){this.$emit("remove-file",e)}}};const Te=(0,n.A)(De,[["render",We],["__scopeId","data-v-029f28b8"]]);var Ge=Te,Ze=s(3574),je=s(11),Ve=s(868),ze={components:{detail:Re,FilePreview:Ge,loadingPage:Ee},props:["chatid"],data(){return{first:!0,purgehere:null,friendstatus:!1,friendlistener:null,chatdata:{id:null},listener:null,messages:[],currentuser:be.currentUser.uid,text:"",picker:new O.h,showDetail:!1,selectedFiles:[],maxFileSize:10485760,loading:!1,progr:0,sound:(0,Ve.f)(s(8200),{volume:.05})}},async beforeUnmount(){null!==this.listener&&await this.listener(),null!==this.friendlistener&&await this.friendlistener()},mounted(){const e=this.$refs.targetscroll;e&&e.scrollIntoView({behavior:"smooth"}),this.picker.on("emoji",(e=>{this.text+=e.emoji}))},methods:{toggleEmojiPicker(e){this.picker.togglePicker(e.target)},removeFile(e){this.selectedFiles.splice(e,1)},async handleFileChange(e){const t=e.target.files;if(this.selectedFiles.length+t.length>20)this.showToast("too Many files, Maximum number is 20 file");else for(let s=0;s<t.length;s++){const e=t[s];if(e.size>this.maxFileSize)this.showToast("maximum size allowed is 10 Mb");else{const t=new FileReader;t.onload=t=>{this.selectedFiles.push({name:e.name,type:e.type,url:t.target.result,file:e});const s=this.$refs.targetscroll;s&&s.scrollIntoView({behavior:"smooth"})},t.readAsDataURL(e)}}},showToast(e){ye()({text:e,duration:3e3,close:!0,gravity:"bottom",position:"right",backgroundColor:"red"}).showToast()},ppppppplla(){this.first||this.sound.play()},async send(){if(""===this.text.trim()&&0===this.selectedFiles.length)return;const e=await this.getnextid(),t=(0,ge.H9)(ve,"chats",this.chatdata.id),s=(0,ge.rJ)(t,"message");if(0===this.selectedFiles.length)await(0,ge.gS)(s,{author:be.currentUser.uid,type:"text",senttime:ge.Dc.now(),filename:"",content:this.text,unread:!0,readby:[],ID:e}),this.text="",this.scrolllll();else{this.loading=!0;const t=this.selectedFiles.map((async t=>{const i=t.type.split("/")[0],a=`${Date.now()}_${(0,Ze.A)()}_${t.name}`,o=(0,pe.KR)(ke,`chats/${this.chatdata.id}/${a}`);await(0,pe.D)(o,t.file);const r=await(0,pe.qk)(o),n="image"===i?"image":"file";await(0,ge.gS)(s,{author:be.currentUser.uid,type:n,senttime:ge.Dc.now(),filename:t.name,content:r,unread:!0,messagecontent:this.text,readby:[],ID:e}),this.progr+=parseInt(100/this.selectedFiles.length)}));await Promise.all(t),this.text="",this.loading=!1,this.progr=100,this.selectedFiles=[],this.$refs.myInput&&this.$refs.myInput.focus(),this.scrolllll()}},async getNextId(){const e=(0,ge.H9)(ve,"chats",this.chatdata.id);try{const t=await(0,ge.c4)(ve,(async t=>{const s=await t.get(e);if(!s.exists())return null;const i=s.data().currentId,a=i+1;return this.text=a,t.update(e,{currentId:a}),a}));return t}catch(t){return null}},async getnextid(){const e=(0,ge.H9)(ve,"chats",this.chatdata.id),t=await(0,ge.x7)(e);return(0,ge.mZ)(e,{currentId:t.data().currentId+1}),t.data().currentId},scrolllll(){const e=this.$refs.targetscroll;e&&e.scrollIntoView({behavior:"smooth"})},downloadFile(e){window.open(e,"_blank")},formatTimeAgo(e){const t=new Date(1e3*e.seconds);return(0,je.m)(t,{addSuffix:!0})},async fetchmessages(){if(null!==this.listener&&await this.listener(),this.messages=[],null!==this.chatdata.id){const t=(0,ge.H9)(ve,"chats",this.chatdata.id),s=(0,ge.rJ)(t,"message"),i=(0,ge.P)(s,(0,ge.My)("ID","asc"));try{this.listener=await(0,ge.aQ)(i,(async e=>{const t=[],s=e.docChanges().map((async e=>{if("added"===e.type){const s=e.doc.data();if(s.id=e.doc.id,null!==s.senttime){if(s.author!==be.currentUser.uid){this.ppppppplla();const e=(0,ge.H9)(ve,"users",s.author),t=await(0,ge.x7)(e),i={...t.data()};s.profileImageUrl=i.profileImageUrl}if("group"==this.chatdata.type){if(s.author!==be.currentUser.uid&&s.readby&&!s.readby.includes(be.currentUser.uid)){const e=(0,ge.H9)(ve,"chats",this.chatdata.id),t=(0,ge.rJ)(e,"message"),i=(0,ge.H9)(t,s.id);await(0,ge.mZ)(i,{readby:(0,ge.hq)(be.currentUser.uid)})}}else if(s.author!==be.currentUser.uid){const e=(0,ge.H9)(ve,"chats",this.chatdata.id),t=(0,ge.rJ)(e,"message"),i=(0,ge.H9)(t,s.id);await(0,ge.mZ)(i,{unread:!1})}t.push(s)}}}));await Promise.all(s),this.messages=[...this.messages,...t],this.messages=[...this.messages].sort(((e,t)=>e.ID-t.ID)),this.first=!1,this.purgehere&&this.purgehere(),this.$nextTick((()=>{this.scrolllll(),this.$refs.myInput&&this.$refs.myInput.focus()}))}))}catch(e){ye()({text:"Something went Wrong 1",duration:3e3,close:!0,gravity:"bottom",position:"right",backgroundColor:"red"}).showToast(),this.$router.push("/")}}},async fetchchat(){if(this.loading=!0,this.first=!0,this.chatid)try{const e=(0,ge.H9)(ve,"users",be.currentUser.uid),t=await(0,ge.x7)(e);if(!t.data().chats.includes(this.chatid))return void this.$router.push("/errorpage");const s=(0,ge.H9)(ve,"chats",this.chatid);this.purgehere=await(0,ge.aQ)(s,(async e=>{if(e.exists()){const t=e.data();if(t.id=e.id,"discussion"===t.type){let e,s;s=t.senders[0]===be.currentUser.uid?t.senders[1]:t.senders[0];const i=(0,ge.H9)(ve,"users",s),a=await(0,ge.x7)(i);a.exists()?e={...a.data(),id:a.id}:ye()({text:"Something went Wrong 2 ",duration:3e3,close:!0,gravity:"bottom",position:"right",backgroundColor:"red"}).showToast(),t.friend=e,this.chatdata=t,null!==this.friendlistener&&await this.friendlistener(),this.assignuserlistener(),this.listener=this.fetchmessages(),this.progr=60,this.loading=!1}else this.chatdata=t,this.listener=this.fetchmessages(),this.progr=60,this.loading=!1}else this.$router.push("/")}))}catch(e){ye()({text:"Something went Wrong 4",duration:3e3,close:!0,gravity:"bottom",position:"right",backgroundColor:"red"}).showToast(),this.$router.push("/")}},async assignuserlistener(){const e=(0,ge.H9)(ve,"users",this.chatdata.friend.id);this.friendlistener=await(0,ge.aQ)(e,(e=>{const t=e.data();this.friendstatus=t.status}))}},watch:{chatid:{handler:"fetchchat",immediate:!0}}};const Se=(0,n.A)(ze,[["render",Y],["__scopeId","data-v-0d51a9e7"]]);var Je=Se;const Ye={style:{height:"90vh",overflow:"scroll"},class:"d-flex flex-column iwnfunweifunwieunfwiuefn"};function Oe(e,t,s,i,o,r){const n=(0,a.g2)("userinfo"),l=(0,a.g2)("chatlist");return(0,a.uX)(),(0,a.CE)("div",Ye,[(0,a.bF)(n,{username:s.username,profileimagelink:s.profileimagelink},null,8,["username","profileimagelink"]),(0,a.bF)(l,{chats:s.chats},null,8,["chats"])])}const Be=e=>((0,a.Qi)("data-v-9e11161a"),e=e(),(0,a.jt)(),e),qe={class:"chatlist"},Ne={class:"search"},Ke={class:"searchbar"},$e=Be((()=>(0,a.Lk)("i",{class:"fas fa-search search-icon",style:{cursor:"pointer"}},null,-1))),et={class:"fas fa-plus add-icon",title:"Add new user or create new group"},tt={class:"ppppppppppppp"},st=["onClick"],it={class:"profile-container"},at=["src"],ot=["src"],rt={class:"texts",style:{overflow:"hidden"}},nt={key:0,style:{"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},lt={key:1,style:{"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},dt={style:{"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},ct={key:0,style:{flex:"1",display:"flex","align-items":"right","justify-content":"right"}},ut={class:"indicator"};function ht(e,t,s,i,o,r){const n=(0,a.g2)("b-form-input"),l=(0,a.gN)("b-tooltip");return(0,a.uX)(),(0,a.CE)("div",qe,[(0,a.Lk)("div",Ne,[(0,a.Lk)("div",Ke,[(0,a.bF)(n,{modelValue:o.searchQuery,"onUpdate:modelValue":t[0]||(t[0]=e=>o.searchQuery=e),type:"search",placeholder:"Search",class:"search-input"},null,8,["modelValue"]),$e]),(0,a.bo)(((0,a.uX)(),(0,a.CE)("div",{class:"oooooooooo",onClick:t[1]||(t[1]=t=>e.$router.push("/add-user-group")),title:"Add new user or create new group"},[(0,a.bo)((0,a.Lk)("i",et,null,512),[[l,void 0,void 0,{hover:!0}]])])),[[l,void 0,void 0,{hover:!0}]])]),(0,a.Lk)("div",tt,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.filteredChats,((e,t)=>((0,a.uX)(),(0,a.CE)("div",{onClick:t=>this.$router.push(`/chat/${e.id}`),key:t,class:"item"},[(0,a.Lk)("div",it,["discussion"===e.type?((0,a.uX)(),(0,a.CE)("img",{key:0,src:e.friendpic,alt:""},null,8,at)):(0,a.Q3)("",!0),"group"===e.type?((0,a.uX)(),(0,a.CE)("img",{key:1,src:e.groupicon,alt:""},null,8,ot)):(0,a.Q3)("",!0),"discussion"===e.type?((0,a.uX)(),(0,a.CE)("div",{key:2,class:(0,h.C4)({"online-indicator":e.status,"offline-indicator":!e.status})},null,2)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",rt,["discussion"===e.type?((0,a.uX)(),(0,a.CE)("span",nt,(0,h.v_)(e.friendusername),1)):(0,a.Q3)("",!0),"group"===e.type?((0,a.uX)(),(0,a.CE)("span",lt,(0,h.v_)(e.groupname),1)):(0,a.Q3)("",!0),(0,a.Lk)("p",dt,(0,h.v_)(e.content),1)]),0!==e.unreadmessages?((0,a.uX)(),(0,a.CE)("div",ct,[(0,a.Lk)("div",ut,(0,h.v_)(e.unreadmessages),1)])):(0,a.Q3)("",!0)],8,st)))),128))])])}var gt={name:"ChatList",props:["chats"],data(){return{searchQuery:"",addMode:!1,first:s(2233),second:s(4289)}},computed:{filteredChats(){return this.searchQuery?this.chats.filter((e=>{const t=this.searchQuery.toLowerCase();return"discussion"===e.type?e.friendusername.toLowerCase().includes(t):"group"===e.type&&e.groupname.toLowerCase().includes(t)})):this.chats}}};const pt=(0,n.A)(gt,[["render",ht],["__scopeId","data-v-9e11161a"]]);var mt=pt;const ft={class:"userinfo d-flex align-items-center justify-content-between pt-3 pb-3"},bt={class:"user d-flex align-items-center gap-2 flex-grow-1",style:{overflow:"hidden"}},vt={class:""},kt={key:0,class:"bi bi-list",style:{color:"white","font-size":"1.8rem"}},wt={class:"avatar-container"},yt={class:"m-0 user-name"};function Ct(e,t,s,o,r,n){const l=(0,a.g2)("b-navbar-toggle"),d=(0,a.g2)("b-navbar"),c=(0,a.g2)("b-avatar"),u=(0,a.g2)("b-nav-item"),g=(0,a.g2)("b-navbar-nav"),p=(0,a.g2)("b-collapse"),m=(0,a.g2)("logoutconfirmation"),f=(0,a.g2)("b-modal");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",null,[(0,a.Lk)("div",ft,[(0,a.Lk)("div",bt,[(0,a.Lk)("div",vt,[(0,a.bF)(d,{toggleable:"0%",type:"white",style:{}},{default:(0,a.k6)((()=>[(0,a.bF)(l,{target:"nav-collapse"},{default:(0,a.k6)((({expanded:e})=>[e?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("i",kt))])),_:1})])),_:1})]),(0,a.Lk)("div",wt,[(0,a.bF)(c,{src:s.profileimagelink,size:"md"},null,8,["src"]),0!==r.numberofinvitations?((0,a.uX)(),(0,a.CE)("span",{key:0,class:"number-indicator",onClick:t[0]||(t[0]=e=>this.$router.push("/invitations"))},(0,h.v_)(r.numberofinvitations),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("h5",yt,(0,h.v_)(s.username),1)])]),(0,a.bF)(p,{id:"nav-collapse","is-nav":"",class:"items"},{default:(0,a.k6)((()=>[(0,a.bF)(g,{class:"navbar"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{class:"items text-light",to:"/"},{default:(0,a.k6)((()=>[(0,a.eW)("Home")])),_:1}),(0,a.bF)(u,{class:"items",to:"/profile"},{default:(0,a.k6)((()=>[(0,a.eW)("Profile")])),_:1}),(0,a.bF)(u,{class:"logout items",style:{width:"100%","text-align":"center","border-radius":"10px"},onClick:t[1]||(t[1]=(0,i.D$)((e=>r.showconfirmation=!0),["prevent"]))},{default:(0,a.k6)((()=>[(0,a.eW)(" Logout ")])),_:1})])),_:1})])),_:1})]),(0,a.bF)(f,{id:"logout-confirmation",size:"lg","hide-footer":"","hide-header":"",modelValue:r.showconfirmation,"onUpdate:modelValue":t[3]||(t[3]=e=>r.showconfirmation=e),onHidden:t[4]||(t[4]=e=>r.showconfirmation=!1),centered:""},{"modal-title":(0,a.k6)((()=>[(0,a.eW)(" Logout Confirmation ")])),default:(0,a.k6)((()=>[(0,a.bF)(m,{onLogout:n.logout,onClose:t[2]||(t[2]=e=>r.showconfirmation=!1)},null,8,["onLogout"])])),_:1},8,["modelValue"])],64)}var At=s(5015);const Lt=e=>((0,a.Qi)("data-v-38988a9f"),e=e(),(0,a.jt)(),e),It={class:"modal-content"},xt=Lt((()=>(0,a.Lk)("div",{class:"modal-header"},[(0,a.Lk)("h5",{class:"modal-title"},"Logout Confirmation")],-1))),Ft=Lt((()=>(0,a.Lk)("div",{class:"modal-body"},[(0,a.Lk)("p",null,"Are you sure you want to logout?")],-1))),Ut={class:"modal-footer"};function Et(e,t){const s=(0,a.g2)("b-button");return(0,a.uX)(),(0,a.CE)("div",It,[xt,Ft,(0,a.Lk)("div",Ut,[(0,a.bF)(s,{variant:"primary",onClick:t[0]||(t[0]=e=>{this.$emit("close")})},{default:(0,a.k6)((()=>[(0,a.eW)("Cancel")])),_:1}),(0,a.bF)(s,{variant:"danger",onClick:t[1]||(t[1]=e=>{this.$emit("logout")})},{default:(0,a.k6)((()=>[(0,a.eW)("Logout")])),_:1})])])}const Pt={},Qt=(0,n.A)(Pt,[["render",Et],["__scopeId","data-v-38988a9f"]]);var Rt=Qt,Xt={props:["username","profileimagelink"],components:{BAvatar:At.Cq,BDropdown:At.UV,BDropdownItem:At.H_,logoutconfirmation:Rt},methods:{async logout(){const e=(0,ge.H9)(ve,"users",be.currentUser.uid);await(0,ge.mZ)(e,{status:!1}),await(0,he.CI)(be),this.$router.push("/login"),ye()({text:"Logout Successfully",duration:2e3,close:!0,gravity:"bottom",position:"right",backgroundColor:"red"}).showToast()},async fetch(){const e=(0,ge.H9)(ve,"users",be.currentUser.uid),t=await(0,ge.aQ)(e,(e=>{const t={...e.data()};this.numberofinvitations&&(this.numberofinvitations=t.invitations.length)}));this.purge.push(t)}},created(){this.fetch()},data(){return{numberofinvitations:0,purge:[],showconfirmation:!1}},async beforeUnmount(){this.purge.forEach((e=>e()))}};const Ht=(0,n.A)(Xt,[["render",Ct],["__scopeId","data-v-0545f6c0"]]);var Mt=Ht,_t={components:{userinfo:Mt,chatlist:mt},props:["username","profileimagelink","chats"]};const Wt=(0,n.A)(_t,[["render",Oe],["__scopeId","data-v-81f4ea5c"]]);var Dt=Wt;const Tt={class:"d-flex flex-column h-100"};function Gt(e,t,s,i,o,r){const n=(0,a.g2)("userinfo"),l=(0,a.g2)("chatlist");return(0,a.uX)(),(0,a.CE)("div",Tt,[(0,a.bF)(n,{username:s.username,profileimagelink:s.profileimagelink},null,8,["username","profileimagelink"]),(0,a.bF)(l,{chats:s.chats},null,8,["chats"])])}const Zt={class:"chatlist"},jt={class:"search"},Vt={class:"searchbar"},zt={title:"Add new user or create new group"},St=["onClick"],Jt={class:"profile-container"},Yt=["src"],Ot=["src"],Bt={class:"texts",style:{overflow:"hidden"}},qt={key:0,style:{"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},Nt={key:1,style:{"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},Kt={style:{"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},$t={key:0,style:{flex:"1",display:"flex","align-items":"right","justify-content":"right"}},es={class:"indicator"};function ts(e,t,s,i,o,r){const n=(0,a.g2)("b-form-input"),l=(0,a.gN)("b-tooltip");return(0,a.uX)(),(0,a.CE)("div",Zt,[(0,a.Lk)("div",jt,[(0,a.Lk)("div",Vt,[(0,a.bF)(n,{modelValue:o.searchQuery,"onUpdate:modelValue":t[0]||(t[0]=e=>o.searchQuery=e),type:"search",placeholder:"Search",class:"search-input",onInput:e.performSearch},null,8,["modelValue","onInput"])]),(0,a.bo)(((0,a.uX)(),(0,a.CE)("div",zt,[(0,a.Lk)("i",{onClick:t[1]||(t[1]=e=>this.$router.push("/add-user-group")),class:"bi bi-plus kmkmk",style:{color:"white","font-size":"2rem",cursor:"pointer"}})])),[[l,void 0,void 0,{hover:!0}]])]),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.filteredChats,((e,t)=>((0,a.uX)(),(0,a.CE)("div",{onClick:t=>this.$router.push(`/chat/${e.id}`),key:t,class:"item"},[(0,a.Lk)("div",Jt,["discussion"===e.type?((0,a.uX)(),(0,a.CE)("img",{key:0,src:e.friendpic,alt:""},null,8,Yt)):(0,a.Q3)("",!0),"group"===e.type?((0,a.uX)(),(0,a.CE)("img",{key:1,src:e.groupicon,alt:""},null,8,Ot)):(0,a.Q3)("",!0),"discussion"===e.type?((0,a.uX)(),(0,a.CE)("div",{key:2,class:(0,h.C4)({"online-indicator":e.status,"offline-indicator":!e.status})},null,2)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",Bt,["discussion"===e.type?((0,a.uX)(),(0,a.CE)("span",qt,(0,h.v_)(e.friendusername),1)):(0,a.Q3)("",!0),"group"===e.type?((0,a.uX)(),(0,a.CE)("span",Nt,(0,h.v_)(e.groupname),1)):(0,a.Q3)("",!0),(0,a.Lk)("p",Kt,(0,h.v_)(e.content),1)]),0!==e.unreadmessages?((0,a.uX)(),(0,a.CE)("div",$t,[(0,a.Lk)("div",es,(0,h.v_)(e.unreadmessages),1)])):(0,a.Q3)("",!0)],8,St)))),128))])}var ss={props:["chats"],data(){return{searchQuery:"",addMode:!0,first:s(2233),second:s(4289)}},computed:{filteredChats(){return this.searchQuery?this.chats.filter((e=>{const t=this.searchQuery.toLowerCase();return"discussion"===e.type?e.friendusername.toLowerCase().includes(t):"group"===e.type&&e.groupname.toLowerCase().includes(t)})):this.chats}}};const is=(0,n.A)(ss,[["render",ts],["__scopeId","data-v-36f60ffa"]]);var as=is;const os={class:"userinfo d-flex align-items-center justify-content-between pt-3 pb-3"},rs={class:"user d-flex align-items-center gap-2 flex-grow-1",style:{overflow:"hidden"}},ns={class:""},ls={key:0,class:"bi bi-list",style:{color:"black","font-size":"1.8rem"}},ds={class:"avatar-container"},cs={class:"m-0 user-name"};function us(e,t,s,o,r,n){const l=(0,a.g2)("b-navbar-toggle"),d=(0,a.g2)("b-navbar"),c=(0,a.g2)("b-avatar"),u=(0,a.g2)("b-nav-item"),g=(0,a.g2)("b-navbar-nav"),p=(0,a.g2)("b-collapse"),m=(0,a.g2)("logoutconfirmation"),f=(0,a.g2)("b-modal");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",null,[(0,a.Lk)("div",os,[(0,a.Lk)("div",rs,[(0,a.Lk)("div",ns,[(0,a.bF)(d,{toggleable:"0%",type:"white",style:{}},{default:(0,a.k6)((()=>[(0,a.bF)(l,{target:"nav-collapse"},{default:(0,a.k6)((({expanded:e})=>[e?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("i",ls))])),_:1})])),_:1})]),(0,a.Lk)("div",ds,[(0,a.bF)(c,{src:s.profileimagelink,size:"md"},null,8,["src"]),0!==r.numberofinvitations?((0,a.uX)(),(0,a.CE)("span",{key:0,class:"number-indicator",onClick:t[0]||(t[0]=e=>this.$router.push("/invitations"))},(0,h.v_)(r.numberofinvitations),1)):(0,a.Q3)("",!0)]),(0,a.eW)(),(0,a.Lk)("h5",cs,(0,h.v_)(s.username),1)])]),(0,a.bF)(p,{id:"nav-collapse","is-nav":"",class:"items"},{default:(0,a.k6)((()=>[(0,a.bF)(g,{class:"navbar"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{class:"items",to:"/"},{default:(0,a.k6)((()=>[(0,a.eW)("Home")])),_:1}),(0,a.bF)(u,{class:"items",to:"/profile"},{default:(0,a.k6)((()=>[(0,a.eW)("Profile")])),_:1}),(0,a.bF)(u,{class:"items",to:"/invitations"},{default:(0,a.k6)((()=>[(0,a.eW)("Invitations")])),_:1}),(0,a.bF)(u,{class:"logout items",style:{width:"100%","text-align":"center","border-radius":"10px"},onClick:t[1]||(t[1]=(0,i.D$)((e=>r.showconfirmation=!0),["prevent"]))},{default:(0,a.k6)((()=>[(0,a.eW)("Logout")])),_:1})])),_:1})])),_:1})]),(0,a.bF)(f,{id:"logout-confirmation",size:"lg","hide-footer":"","hide-header":"",modelValue:r.showconfirmation,"onUpdate:modelValue":t[3]||(t[3]=e=>r.showconfirmation=e),onHidden:t[4]||(t[4]=e=>r.showconfirmation=!1),centered:""},{"modal-title":(0,a.k6)((()=>[(0,a.eW)(" Logout Confirmation ")])),default:(0,a.k6)((()=>[(0,a.bF)(m,{onLogout:n.logout,onClose:t[2]||(t[2]=e=>r.showconfirmation=!1)},null,8,["onLogout"])])),_:1},8,["modelValue"])],64)}var hs={props:["username","profileimagelink"],components:{BAvatar:At.Cq,BDropdown:At.UV,BDropdownItem:At.H_,logoutconfirmation:Rt},methods:{async logout(){const e=(0,ge.H9)(ve,"users",be.currentUser.uid);await(0,ge.mZ)(e,{status:!1}),await(0,he.CI)(be),this.$router.push("/login"),ye()({text:"Logout Successfully",duration:2e3,close:!0,gravity:"bottom",position:"right",backgroundColor:"red"}).showToast()},async fetch(){const e=(0,ge.H9)(ve,"users",be.currentUser.uid),t=await(0,ge.aQ)(e,(e=>{const t={...e.data()};void 0!==t.invitations&&(this.numberofinvitations=t.invitations.length)}));this.purge.push(t)}},created(){this.fetch()},data(){return{numberofinvitations:0,purge:[],showconfirmation:!1}},async beforeUnmount(){this.purge.forEach((e=>e()))}};const gs=(0,n.A)(hs,[["render",us],["__scopeId","data-v-287a2389"]]);var ps=gs,ms={components:{userinfo:ps,chatlist:as},props:["username","profileimagelink","chats"]};const fs=(0,n.A)(ms,[["render",Gt],["__scopeId","data-v-339715fa"]]);var bs=fs;const vs=e=>((0,a.Qi)("data-v-75671fe5"),e=e(),(0,a.jt)(),e),ks=vs((()=>(0,a.Lk)("div",{class:"chat"},[(0,a.Lk)("div",{class:"center"},[(0,a.Lk)("i",{class:"bi bi-chat",style:{cursor:"pointer","font-size":"9rem"}}),(0,a.Lk)("h1",null,"Cs Chat : The chat App for developers ")])],-1)));function ws(e,t,s,i,o,r){const n=(0,a.g2)("detail"),l=(0,a.g2)("b-modal");return(0,a.uX)(),(0,a.CE)(a.FK,null,[ks,(0,a.bF)(l,{id:"detail-modal",size:"lg","hide-footer":"",modelValue:o.showDetail,"onUpdate:modelValue":t[0]||(t[0]=e=>o.showDetail=e),onHidden:t[1]||(t[1]=e=>o.showDetail=!1),centered:"",class:"slide-in"},{"modal-title":(0,a.k6)((()=>[(0,a.eW)(" Detail ")])),default:(0,a.k6)((()=>[(0,a.bF)(n)])),_:1},8,["modelValue"])],64)}var ys={components:{detail:Re},data(){return{text:"",picker:new O.h,showDetail:!1}},mounted(){const e=this.$refs.targetscroll;e&&e.scrollIntoView({behavior:"smooth"}),this.picker.on("emoji",(e=>{this.text+=e.emoji}))},methods:{toggleEmojiPicker(e){this.picker.togglePicker(e.target)}}};const Cs=(0,n.A)(ys,[["render",ws],["__scopeId","data-v-75671fe5"]]);var As=Cs,Ls={components:{chat:Je,list:Dt,detail:Re,listmodal:bs,welcomePage:As},async created(){await this.fetch()},data(){return{user:{username:"error",profileImageUrl:null,chats:[]},chats:[],listeners:{},purge:[],loading:!0,showList:!1,showDetail:!1}},computed:{isMediumAndUp(){return window.innerWidth>=768}},mounted(){window.addEventListener("resize",this.handleResize)},beforeDestroy(){window.removeEventListener("resize",this.handleResize)},async beforeUnmount(){Object.values(this.listeners).forEach((e=>{e()})),this.purge.forEach((e=>e()))},methods:{handleResize(){this.isMediumAndUp&&(this.showList=!1,this.showDetail=!1)},resetModal(){this.isMediumAndUp&&(this.showList=!1,this.showDetail=!1)},async fetch(){const e=(0,ge.H9)(ve,"users",be.currentUser.uid),t=await(0,ge.aQ)(e,(e=>{if(e.exists()){const t=e.data();this.user.username=t.username,this.user.profileImageUrl=t.profileImageUrl,this.user.chats=t.chats,this.fetchdata(t)}else ye()({text:"Something went Wrong",duration:3e3,close:!0,gravity:"bottom",position:"right",backgroundColor:"red"}).showToast()}));this.purge.push(t)},async fetchdata(e){if(e.chats&&0!==e.chats.length){const t=(0,ge.P)((0,ge.rJ)(ve,"chats"),(0,ge._M)("__name__","in",e.chats)),s=await(0,ge.aQ)(t,(e=>{e.docChanges().forEach((async e=>{if("added"===e.type){const t=e.doc,s={id:t.id,...t.data()};let i,a;a=s.senders[0]===be.currentUser.uid?s.senders[1]:s.senders[0];const o=(0,ge.H9)(ve,"chats",s.id),r=(0,ge.rJ)(o,"message"),n=(0,ge.P)(r,(0,ge.My)("ID","desc")),l=(0,ge.aQ)(n,(async e=>{const t=e;let o,n,l;if("discussion"===s.type){const e=(0,ge.P)(r,(0,ge._M)("unread","==",!0),(0,ge._M)("author","!=",be.currentUser.uid)),d=await(0,ge.d_)(e);l=d.data().count;const c=(0,ge.H9)(ve,"users",a);if(!(a in this.listeners)){const e=await(0,ge.aQ)(c,(e=>{this.updatestatus({...e.data(),id:e.id})}));this.listeners[a]=e}const u=await(0,ge.x7)(c);if(u.exists()?i={...u.data(),id:u.id}:ye()({text:"Something went Wrong",duration:3e3,close:!0,gravity:"bottom",position:"right",backgroundColor:"red"}).showToast(),t.empty)o="Invitation Accepted",n=s.createdat;else{const e=t.docs[0],s=e.data();"text"===s.type?(o=s.content,n=s.senttime):"image"===s.type?(o="Image Sent",n=s.senttime):(o="document Sent",n=s.senttime)}this.updater({...s,friendusername:i.username,friendpic:i.profileImageUrl,content:o,time:n,unreadmessages:l,status:i.status,friendid:i.id})}else{const e=(0,ge.P)(r,(0,ge._M)("readby","array-contains",be.currentUser.uid),(0,ge._M)("author","!=",be.currentUser.uid)),i=(0,ge.P)(r,(0,ge._M)("author","!=",be.currentUser.uid)),a=await(0,ge.d_)(e),d=await(0,ge.d_)(i);if(l=d.data().count-a.data().count,console.log(l),t.empty)o="Invitation Accepted",n=s.createdat;else{const e=t.docs[0],s=e.data();"text"===s.type?(o=s.content,n=s.senttime):"image"===s.type?(o="Image Sent",n=s.senttime):(o="document Sent",n=s.senttime)}this.updater({...s,time:n,content:o,unreadmessages:l})}}));this.purge.push(l)}}))}));this.purge.push(s),this.loading=!1}else this.loading=!1},updater(e){const t=this.chats.findIndex((t=>t.id===e.id));-1===t?this.chats.push(e):this.chats[t]=e,this.chats=[...this.chats].sort(((e,t)=>t.time.seconds-e.time.seconds)),console.log(this.chats)},updatestatus(e){const t=this.chats.findIndex((t=>"discussion"===t.type&&t.friendid===e.id));-1!==t&&(this.chats[t].status=e.status)}}};const Is=(0,n.A)(Ls,[["render",u]]);var xs=Is;const Fs=e=>((0,a.Qi)("data-v-134a9344"),e=e(),(0,a.jt)(),e),Us=Fs((()=>(0,a.Lk)("div",{style:{display:"flex","justify-content":"center","align-items":"center"}},[(0,a.Lk)("div",{class:"app-introduction animated-flex d-xl-none"},[(0,a.Lk)("h2",{style:{color:"rgba(255, 255, 233, 0.9)","font-weight":"bold"}},[(0,a.eW)("CS Chat : The Chat App for Developers "),(0,a.Lk)("i",{class:"fas fa-code",style:{color:"rgba(255, 255, 233, 0.9)","font-size":"30px"}})]),(0,a.Lk)("br")])],-1)));function Es(e,t,s,i,o,r){const n=(0,a.g2)("intro"),l=(0,a.g2)("b-col"),d=(0,a.g2)("LoginForm"),c=(0,a.g2)("b-row");return(0,a.uX)(),(0,a.Wv)(c,{class:"iii",style:{"overflow-y":"scroll",height:"90vh",width:"100%"}},{default:(0,a.k6)((()=>[(0,a.bF)(l,{cols:"7",class:"animated-flex d-none d-xl-block op"},{default:(0,a.k6)((()=>[(0,a.bF)(n)])),_:1}),(0,a.bF)(l,{cols:"12",xl:"5"},{default:(0,a.k6)((()=>[Us,(0,a.bF)(d)])),_:1})])),_:1})}const Ps=e=>((0,a.Qi)("data-v-7ea8a3f2"),e=e(),(0,a.jt)(),e),Qs={class:"auth-wrapper"},Rs={class:"auth-card"},Xs=Ps((()=>(0,a.Lk)("div",{class:"auth-header"},[(0,a.Lk)("i",{class:"fas fa-user-lock fa-3x"}),(0,a.Lk)("h2",null,"Welcome Back"),(0,a.Lk)("p",null,"Please login to your account")],-1))),Hs={class:"social-login"},Ms=Ps((()=>(0,a.Lk)("i",{class:"fab fa-google"},null,-1))),_s=Ps((()=>(0,a.Lk)("i",{class:"fab fa-facebook-f"},null,-1))),Ws=Ps((()=>(0,a.Lk)("div",{class:"divider"},[(0,a.Lk)("span",null,"OR")],-1))),Ds={class:"input-group"},Ts=Ps((()=>(0,a.Lk)("div",{class:"input-group-prepend"},[(0,a.Lk)("span",{class:"input-group-text"},[(0,a.Lk)("i",{class:"fas fa-envelope"})])],-1))),Gs={class:"input-group"},Zs=Ps((()=>(0,a.Lk)("div",{class:"input-group-prepend"},[(0,a.Lk)("span",{class:"input-group-text"},[(0,a.Lk)("i",{class:"fas fa-lock"})])],-1))),js={class:"input-group-append"},Vs=Ps((()=>(0,a.Lk)("i",{class:"fas fa-sign-in-alt mr-2"},null,-1))),zs=Ps((()=>(0,a.Lk)("i",{class:"fas fa-user-plus mr-2"},null,-1))),Ss={class:"terms"};function Js(e,t,s,o,r,n){const l=(0,a.g2)("b-button"),d=(0,a.g2)("b-form-input"),c=(0,a.g2)("b-form-group"),u=(0,a.g2)("b-form-checkbox"),g=(0,a.g2)("b-link"),p=(0,a.g2)("b-form"),m=(0,a.g2)("loadingPage");return(0,a.uX)(),(0,a.CE)("div",Qs,[(0,a.Lk)("div",Rs,[Xs,(0,a.Lk)("div",Hs,[(0,a.bF)(l,{variant:"outline-danger",class:"social-btn"},{default:(0,a.k6)((()=>[Ms,(0,a.eW)(" Login with Google ")])),_:1}),(0,a.bF)(l,{variant:"outline-primary",class:"social-btn"},{default:(0,a.k6)((()=>[_s,(0,a.eW)(" Login with Facebook ")])),_:1})]),Ws,(0,a.bF)(p,{onSubmit:(0,i.D$)(n.login,["prevent"]),class:"auth-form"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{label:"Email Address","label-for":"email","label-cols":"12","label-align-sm":"left"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",Ds,[Ts,(0,a.bF)(d,{id:"email",modelValue:r.email,"onUpdate:modelValue":t[0]||(t[0]=e=>r.email=e),type:"email",required:"",placeholder:"Enter your email",class:"form-input"},null,8,["modelValue"])])])),_:1}),(0,a.bF)(c,{label:"Password","label-for":"password","label-cols":"12","label-align-sm":"left"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",Gs,[Zs,(0,a.bF)(d,{id:"password",modelValue:r.password,"onUpdate:modelValue":t[1]||(t[1]=e=>r.password=e),type:r.showPassword?"text":"password",required:"",placeholder:"Enter your password",class:"form-input"},null,8,["modelValue","type"]),(0,a.Lk)("div",js,[(0,a.Lk)("span",{class:"input-group-text",onClick:t[2]||(t[2]=(...e)=>n.togglePasswordVisibility&&n.togglePasswordVisibility(...e)),style:{cursor:"pointer"}},[(0,a.Lk)("i",{class:(0,h.C4)(r.showPassword?"fas fa-eye-slash":"fas fa-eye")},null,2)])])])])),_:1}),(0,a.bF)(c,{class:"d-flex justify-content-between align-items-center"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{modelValue:r.rememberMe,"onUpdate:modelValue":t[3]||(t[3]=e=>r.rememberMe=e)},{default:(0,a.k6)((()=>[(0,a.eW)("Remember Me")])),_:1},8,["modelValue"]),(0,a.bF)(g,{onClick:n.goToResetPassword,class:"forgot-password"},{default:(0,a.k6)((()=>[(0,a.eW)("Forgot Password?")])),_:1},8,["onClick"])])),_:1}),(0,a.bF)(l,{type:"submit",variant:"primary",class:"btn-auth w-100 mb-3"},{default:(0,a.k6)((()=>[Vs,(0,a.eW)(" Login ")])),_:1}),(0,a.bF)(l,{onClick:n.goToSignUp,variant:"outline-primary",class:"btn-auth w-100 mb-2"},{default:(0,a.k6)((()=>[zs,(0,a.eW)(" Sign Up ")])),_:1},8,["onClick"])])),_:1},8,["onSubmit"]),(0,a.Lk)("div",Ss,[(0,a.Lk)("p",null,[(0,a.eW)("By logging in, you agree to our "),(0,a.bF)(g,{href:"#"},{default:(0,a.k6)((()=>[(0,a.eW)("Terms of Service")])),_:1}),(0,a.eW)(" and "),(0,a.bF)(g,{href:"#"},{default:(0,a.k6)((()=>[(0,a.eW)("Privacy Policy")])),_:1}),(0,a.eW)(".")])])]),r.loading?((0,a.uX)(),(0,a.Wv)(m,{key:0,progress:r.progr},null,8,["progress"])):(0,a.Q3)("",!0)])}var Ys={components:{loadingPage:Ee},data(){return{email:"",password:"",rememberMe:!1,showPassword:!1,loading:!1,progr:0}},methods:{async login(){try{this.loading=!0,this.progr=30,await(0,he.x9)(be,this.email,this.password);const e=(0,ge.H9)(ve,"users",be.currentUser.uid);await(0,ge.mZ)(e,{status:!0,lastLogin:new Date}),this.progr=100,this.rememberMe?localStorage.setItem("userEmail",this.email):localStorage.removeItem("userEmail"),this.$router.push("/"),ye()({text:"Login Successful!",duration:3e3,close:!0,gravity:"top",position:"right",backgroundColor:"#28a745"}).showToast()}catch(e){this.loading=!1,ye()({text:e.message,duration:3e3,close:!0,gravity:"top",position:"right",backgroundColor:"#dc3545"}).showToast()}},goToSignUp(){this.$router.push("/signup")},goToResetPassword(){this.$router.push("/reset-password")},togglePasswordVisibility(){this.showPassword=!this.showPassword}},mounted(){const e=localStorage.getItem("userEmail");e&&(this.email=e,this.rememberMe=!0)}};const Os=(0,n.A)(Ys,[["render",Js],["__scopeId","data-v-7ea8a3f2"]]);var Bs=Os,qs=s.p+"img/intro.94c51f1c.jpg";const Ns=e=>((0,a.Qi)("data-v-385649b6"),e=e(),(0,a.jt)(),e),Ks={class:"container1"},$s=Ns((()=>(0,a.Lk)("div",{class:"app-introduction"},[(0,a.Lk)("img",{src:qs,alt:"Chat Icon",class:"chat-icon"}),(0,a.Lk)("h2",null,"CS Chat"),(0,a.Lk)("h4",null,[(0,a.eW)(" Chat for Developers "),(0,a.Lk)("i",{class:"fas fa-code",style:{color:"purple"}})])],-1))),ei=[$s];function ti(e,t,s,i,o,r){return(0,a.uX)(),(0,a.CE)("div",Ks,ei)}var si={name:"AppIntroduction"};const ii=(0,n.A)(si,[["render",ti],["__scopeId","data-v-385649b6"]]);var ai=ii,oi={components:{LoginForm:Bs,intro:ai}};const ri=(0,n.A)(oi,[["render",Es],["__scopeId","data-v-134a9344"]]);var ni=ri;const li=e=>((0,a.Qi)("data-v-2fb0f67c"),e=e(),(0,a.jt)(),e),di=li((()=>(0,a.Lk)("div",{style:{display:"flex","justify-content":"center","align-items":"center"}},[(0,a.Lk)("div",{class:"app-introduction animated-flex d-xl-none"},[(0,a.Lk)("h2",{style:{color:"rgba(255, 255, 233, 0.9)","font-weight":"bold"}},"Welcome to ChatFlow!"),(0,a.Lk)("br")])],-1)));function ci(e,t,s,i,o,r){const n=(0,a.g2)("intro"),l=(0,a.g2)("b-col"),d=(0,a.g2)("RegisterForm"),c=(0,a.g2)("b-row");return(0,a.uX)(),(0,a.Wv)(c,{class:"iii",style:{"overflow-y":"scroll",height:"90vh",width:"100%"}},{default:(0,a.k6)((()=>[(0,a.bF)(l,{cols:"7",class:"animated-flex d-none d-xl-block op"},{default:(0,a.k6)((()=>[(0,a.bF)(n)])),_:1}),(0,a.bF)(l,{cols:"12",xl:"5"},{default:(0,a.k6)((()=>[di,(0,a.bF)(d)])),_:1})])),_:1})}const ui=e=>((0,a.Qi)("data-v-6fb196de"),e=e(),(0,a.jt)(),e),hi={class:"auth-wrapper"},gi={class:"auth-card"},pi=ui((()=>(0,a.Lk)("div",{class:"auth-header"},[(0,a.Lk)("i",{class:"fas fa-user-plus fa-3x"}),(0,a.Lk)("h2",null,"Join Us"),(0,a.Lk)("p",null,"Create a new account to get started")],-1))),mi=ui((()=>(0,a.Lk)("div",{class:"divider"},[(0,a.Lk)("span",null,"OR")],-1))),fi={class:"profile-picture-upload"},bi={for:"profile-picture-input",class:"profile-picture-label"},vi=["src"],ki=ui((()=>(0,a.Lk)("span",null,"Upload an image",-1))),wi={class:"input-group"},yi=ui((()=>(0,a.Lk)("div",{class:"input-group-prepend"},[(0,a.Lk)("span",{class:"input-group-text"},[(0,a.Lk)("i",{class:"fas fa-user"})])],-1))),Ci={class:"input-group"},Ai=ui((()=>(0,a.Lk)("div",{class:"input-group-prepend"},[(0,a.Lk)("span",{class:"input-group-text"},[(0,a.Lk)("i",{class:"fas fa-envelope"})])],-1))),Li={class:"input-group"},Ii=ui((()=>(0,a.Lk)("div",{class:"input-group-prepend"},[(0,a.Lk)("span",{class:"input-group-text"},[(0,a.Lk)("i",{class:"fas fa-lock"})])],-1))),xi={class:"input-group"},Fi=ui((()=>(0,a.Lk)("div",{class:"input-group-prepend"},[(0,a.Lk)("span",{class:"input-group-text"},[(0,a.Lk)("i",{class:"fas fa-lock"})])],-1))),Ui=ui((()=>(0,a.Lk)("i",{class:"fas fa-user-plus mr-2"},null,-1))),Ei=ui((()=>(0,a.Lk)("i",{class:"fas fa-arrow-left mr-2"},null,-1))),Pi={class:"terms"};function Qi(e,t,s,o,r,n){const l=(0,a.g2)("b-form-input"),d=(0,a.g2)("b-form-group"),c=(0,a.g2)("b-button"),u=(0,a.g2)("b-form"),h=(0,a.g2)("b-link"),g=(0,a.g2)("loadingPage");return(0,a.uX)(),(0,a.CE)("div",hi,[(0,a.Lk)("div",gi,[pi,mi,(0,a.bF)(u,{onSubmit:(0,i.D$)(n.register,["prevent"]),class:"auth-form"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",fi,[(0,a.Lk)("label",bi,[(0,a.Lk)("img",{src:r.profilePictureUrl||r.defaultProfilePicture,alt:"Profile Picture",class:"profile-picture"},null,8,vi),ki]),(0,a.Lk)("input",{id:"profile-picture-input",type:"file",onChange:t[0]||(t[0]=(...e)=>n.onFileChange&&n.onFileChange(...e)),accept:"image/*",class:"form-control-file",style:{display:"none"}},null,32)]),(0,a.bF)(d,{label:"Username","label-for":"username-input","label-cols":"12","label-align-sm":"left"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",wi,[yi,(0,a.bF)(l,{id:"username-input",modelValue:r.username,"onUpdate:modelValue":t[1]||(t[1]=e=>r.username=e),type:"text",required:"",placeholder:"Choose a username",class:"form-input"},null,8,["modelValue"])])])),_:1}),(0,a.bF)(d,{label:"Email","label-for":"email-input","label-cols":"12","label-align-sm":"left"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",Ci,[Ai,(0,a.bF)(l,{id:"email-input",modelValue:r.email,"onUpdate:modelValue":t[2]||(t[2]=e=>r.email=e),type:"email",required:"",placeholder:"Enter your email",class:"form-input"},null,8,["modelValue"])])])),_:1}),(0,a.bF)(d,{label:"Password","label-for":"password-input","label-cols":"12","label-align-sm":"left"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",Li,[Ii,(0,a.bF)(l,{id:"password-input",modelValue:r.password,"onUpdate:modelValue":t[3]||(t[3]=e=>r.password=e),type:"password",required:"",placeholder:"Create a password",class:"form-input"},null,8,["modelValue"])])])),_:1}),(0,a.bF)(d,{label:"Confirm Password","label-for":"confirm-password-input","label-cols":"12","label-align-sm":"left"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",xi,[Fi,(0,a.bF)(l,{id:"confirm-password-input",modelValue:r.confirmPassword,"onUpdate:modelValue":t[4]||(t[4]=e=>r.confirmPassword=e),type:"password",required:"",placeholder:"Confirm your password",class:"form-input"},null,8,["modelValue"])])])),_:1}),(0,a.bF)(c,{type:"submit",variant:"primary",class:"btn-auth w-100 mb-3"},{default:(0,a.k6)((()=>[Ui,(0,a.eW)(" Register ")])),_:1}),(0,a.bF)(c,{onClick:n.goToLogin,variant:"outline-secondary",class:"btn-auth w-100 mb-2"},{default:(0,a.k6)((()=>[Ei,(0,a.eW)(" Back to Login ")])),_:1},8,["onClick"])])),_:1},8,["onSubmit"]),(0,a.Lk)("div",Pi,[(0,a.Lk)("p",null,[(0,a.eW)("By registering, you agree to our "),(0,a.bF)(h,{href:"#"},{default:(0,a.k6)((()=>[(0,a.eW)("Terms of Service")])),_:1}),(0,a.eW)(" and "),(0,a.bF)(h,{href:"#"},{default:(0,a.k6)((()=>[(0,a.eW)("Privacy Policy")])),_:1}),(0,a.eW)(".")])])]),r.loading?((0,a.uX)(),(0,a.Wv)(g,{key:0,progress:r.progr},null,8,["progress"])):(0,a.Q3)("",!0)])}s(4603),s(7566),s(8721);var Ri={components:{loadingPage:Ee},data(){return{progr:0,loading:!1,username:"",email:"",password:"",description:"",confirmPassword:"",profilePicture:null,profilePictureUrl:"",defaultProfilePicture:s(5439)}},methods:{async register(){try{if(this.loading=!0,this.progr=30,this.password!==this.confirmPassword)return ye()({text:"Passwords do not match!",duration:3e3,close:!0,gravity:"top",position:"right",backgroundColor:"#dc3545"}).showToast(),void(this.loading=!1);const e=await(0,he.eJ)(be,this.email,this.password),t=e.user;this.progr=60;let s="";if(this.profilePicture){const e=(0,pe.KR)(ke,`profileimages/${t.uid}/${this.profilePicture.name}`);await(0,pe.D)(e,this.profilePicture),s=await(0,pe.qk)(e)}else s=this.defaultProfilePicture;const i=(0,ge.H9)(ve,"users",t.uid);await(0,ge.BN)(i,{email:this.email,username:this.username.trim(),description:this.description.trim(),profileImageUrl:s,status:!0,createdat:ge.Dc.now(),lastLogin:new Date}),this.progr=100,this.$router.push("/"),ye()({text:"Registration Successful!",duration:3e3,close:!0,gravity:"top",position:"right",backgroundColor:"#28a745"}).showToast()}catch(e){this.loading=!1,ye()({text:e.message,duration:3e3,close:!0,gravity:"top",position:"right",backgroundColor:"#dc3545"}).showToast()}finally{this.loading=!1}},goToLogin(){this.$router.push("/")},onFileChange(e){const t=e.target.files[0];t&&(this.profilePicture=t,this.profilePictureUrl=URL.createObjectURL(t))},async fileToBlob(e){const t=await fetch(e),s=await t.blob();return s}}};const Xi=(0,n.A)(Ri,[["render",Qi],["__scopeId","data-v-6fb196de"]]);var Hi=Xi,Mi={components:{RegisterForm:Hi,intro:ai}};const _i=(0,n.A)(Mi,[["render",ci],["__scopeId","data-v-2fb0f67c"]]);var Wi=_i;function Di(e,t,s,i,o,r){const n=(0,a.g2)("b-col"),l=(0,a.g2)("b-row"),d=(0,a.g2)("list"),c=(0,a.g2)("chat",!0),u=(0,a.g2)("loadingPage"),h=(0,a.g2)("listmodal"),g=(0,a.g2)("b-modal"),p=(0,a.gN)("b-tooltip");return(0,a.uX)(),(0,a.CE)(a.FK,null,[o.doneloading?((0,a.uX)(),(0,a.Wv)(l,{key:0,class:"d-xl-none mb-3"},{default:(0,a.k6)((()=>[(0,a.bF)(l,{style:{display:"flex","flex-direction":"column"}},{default:(0,a.k6)((()=>[(0,a.bo)(((0,a.uX)(),(0,a.Wv)(n,{title:"show contacts list",style:{cursor:"pointer","margin-right":"15px","margin-left":"20px","margin-top":"20px"}},{default:(0,a.k6)((()=>[(0,a.Lk)("i",{onClick:t[0]||(t[0]=e=>o.showList=!0),class:"bi bi-chat-fill",style:{"font-size":"1.8rem"}})])),_:1})),[[p,void 0,void 0,{hover:!0}]])])),_:1})])),_:1})):(0,a.Q3)("",!0),o.doneloading?((0,a.uX)(),(0,a.Wv)(l,{key:1,style:{height:"90vh",width:"100%"}},{default:(0,a.k6)((()=>[(0,a.bF)(n,{cols:"3",class:"animated-flex d-none d-xl-block"},{default:(0,a.k6)((()=>[(0,a.bF)(d,{chats:o.chats,profileimagelink:o.user.profileImageUrl,username:o.user.username},null,8,["chats","profileimagelink","username"])])),_:1}),(0,a.bF)(n,{cols:"12",xl:"9",class:"ooo"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{chatid:s.chatid},null,8,["chatid"])])),_:1})])),_:1})):(0,a.Q3)("",!0),o.loading?((0,a.uX)(),(0,a.Wv)(u,{key:2,progress:o.progr},null,8,["progress"])):(0,a.Q3)("",!0),(0,a.bF)(g,{id:"list-modal",size:"lg","hide-footer":"",modelValue:o.showList,"onUpdate:modelValue":t[1]||(t[1]=e=>o.showList=e),onHidden:r.resetModal,centered:"",class:"slide-in"},{"modal-title":(0,a.k6)((()=>[(0,a.eW)(" List ")])),default:(0,a.k6)((()=>[(0,a.bF)(h,{chats:o.chats,profileimagelink:o.user.profileImageUrl,username:o.user.username},null,8,["chats","profileimagelink","username"])])),_:1},8,["modelValue","onHidden"])],64)}var Ti={props:["chatid"],components:{chat:Je,list:Dt,detail:Re,listmodal:bs,loadingPage:Ee},async created(){await this.fetch()},data(){return{user:{username:"error",profileImageUrl:null,chats:[]},chats:[],listeners:{},purge:[],loading:!0,showList:!1,showDetail:!1,doneloading:!0,progr:0}},computed:{isMediumAndUp(){return window.innerWidth>=768}},async mounted(){window.addEventListener("resize",this.handleResize)},beforeDestroy(){window.removeEventListener("resize",this.handleResize)},async beforeUnmount(){Object.values(this.listeners).forEach((e=>{e()})),this.purge.forEach((e=>e()))},methods:{handleResize(){this.isMediumAndUp&&(this.showList=!1,this.showDetail=!1)},resetModal(){this.isMediumAndUp&&(this.showList=!1,this.showDetail=!1)},async fetch(){const e=(0,ge.H9)(ve,"users",be.currentUser.uid),t=await(0,ge.aQ)(e,(e=>{if(e.exists()){const t=e.data();this.user.username=t.username,this.user.profileImageUrl=t.profileImageUrl,this.user.chats=t.chats,t.chats.includes(this.chatid)||this.$router.push("/"),this.fetchdata(t)}else ye()({text:"Something went Wrong",duration:3e3,close:!0,gravity:"bottom",position:"right",backgroundColor:"red"}).showToast()}));this.purge.push(t)},async fetchdata(e){if(0!==e.chats.length){const t=(0,ge.P)((0,ge.rJ)(ve,"chats"),(0,ge._M)("__name__","in",e.chats)),s=await(0,ge.aQ)(t,(e=>{e.docChanges().forEach((async e=>{if(e.doc.data().senders.includes(be.currentUser.uid)||window.location.reload(),"added"===e.type){const t=e.doc,s={id:t.id,...t.data()};let i,a;a=s.senders[0]===be.currentUser.uid?s.senders[1]:s.senders[0];const o=(0,ge.H9)(ve,"chats",s.id),r=(0,ge.rJ)(o,"message"),n=(0,ge.P)(r,(0,ge.My)("ID","desc")),l=(0,ge.aQ)(n,(async e=>{const t=e;let o,n,l;if("discussion"===s.type){const e=(0,ge.P)(r,(0,ge._M)("unread","==",!0),(0,ge._M)("author","!=",be.currentUser.uid)),d=await(0,ge.d_)(e);l=d.data().count;const c=(0,ge.H9)(ve,"users",a);if(!(a in this.listeners)){const e=await(0,ge.aQ)(c,(e=>{this.updatestatus({...e.data(),id:e.id})}));this.listeners[a]=e}const u=await(0,ge.x7)(c);if(u.exists()?i={...u.data(),id:u.id}:ye()({text:"Something went Wrong",duration:3e3,close:!0,gravity:"bottom",position:"right",backgroundColor:"red"}).showToast(),t.empty)o="Invitation Accepted",n=s.createdat;else{const e=t.docs[0],s=e.data();"text"===s.type?(o=s.content,n=s.senttime):"image"===s.type?(o="Image Sent",n=s.senttime):(o="document Sent",n=s.senttime)}this.updater({...s,friendusername:i.username,friendpic:i.profileImageUrl,content:o,time:n,unreadmessages:l,status:i.status,friendid:i.id})}else{const e=(0,ge.P)(r,(0,ge._M)("readby","array-contains",be.currentUser.uid),(0,ge._M)("author","!=",be.currentUser.uid)),i=(0,ge.P)(r,(0,ge._M)("author","!=",be.currentUser.uid)),a=await(0,ge.d_)(e),d=await(0,ge.d_)(i);if(l=d.data().count-a.data().count,console.log(l),t.empty)o="Invitation Accepted",n=s.createdat;else{const e=t.docs[0],s=e.data();"text"===s.type?(o=s.content,n=s.senttime):"image"===s.type?(o="Image Sent",n=s.senttime):(o="document Sent",n=s.senttime)}this.updater({...s,time:n,content:o,unreadmessages:l})}}));this.purge.push(l)}}))}));this.purge.push(s),this.loading=!1}else this.loading=!1},updater(e){const t=this.chats.findIndex((t=>t.id===e.id));-1===t?this.chats.push(e):this.chats[t]=e,this.chats=[...this.chats].sort(((e,t)=>t.time.seconds-e.time.seconds))},updatestatus(e){const t=this.chats.findIndex((t=>"discussion"===t.type&&t.friendid===e.id));-1!==t&&(this.chats[t].status=e.status)}}};const Gi=(0,n.A)(Ti,[["render",Di]]);var Zi=Gi;function ji(e,t,s,i,o,r){const n=(0,a.g2)("b-col"),l=(0,a.g2)("b-row"),d=(0,a.g2)("list"),c=(0,a.g2)("invitations",!0),u=(0,a.g2)("listmodal"),h=(0,a.g2)("b-modal"),g=(0,a.gN)("b-tooltip");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(l,{class:"d-xl-none mb-3"},{default:(0,a.k6)((()=>[(0,a.bF)(l,{style:{display:"flex","flex-direction":"column"}},{default:(0,a.k6)((()=>[(0,a.bo)(((0,a.uX)(),(0,a.Wv)(n,{title:"show contacts list",style:{cursor:"pointer","margin-right":"15px","margin-left":"20px","margin-top":"20px"}},{default:(0,a.k6)((()=>[(0,a.Lk)("i",{onClick:t[0]||(t[0]=e=>o.showList=!0),class:"bi bi-chat-fill",style:{"font-size":"1.8rem"}})])),_:1})),[[g,void 0,void 0,{hover:!0}]])])),_:1})])),_:1}),(0,a.bF)(l,{style:{height:"90vh",width:"100%"}},{default:(0,a.k6)((()=>[(0,a.bF)(n,{cols:"3",class:"animated-flex d-none d-xl-block"},{default:(0,a.k6)((()=>[(0,a.bF)(d,{chats:o.chats,profileimagelink:o.user.profileImageUrl,username:o.user.username},null,8,["chats","profileimagelink","username"])])),_:1}),(0,a.bF)(n,{cols:"12",xl:"9",class:"ooo"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{invitations:o.invitations},null,8,["invitations"])])),_:1})])),_:1}),(0,a.bF)(h,{id:"list-modal",size:"lg","hide-footer":"",modelValue:o.showList,"onUpdate:modelValue":t[1]||(t[1]=e=>o.showList=e),onHidden:r.resetModal,centered:"",class:"slide-in"},{"modal-title":(0,a.k6)((()=>[(0,a.eW)(" List ")])),default:(0,a.k6)((()=>[(0,a.bF)(u,{chats:o.chats,profileimagelink:o.user.profileImageUrl,username:o.user.username},null,8,["chats","profileimagelink","username"])])),_:1},8,["modelValue","onHidden"])],64)}const Vi=e=>((0,a.Qi)("data-v-3f624ccc"),e=e(),(0,a.jt)(),e),zi={class:"chat"},Si={class:"search"},Ji={class:"searchbar"},Yi={key:0,class:"bi bi-search",style:{color:"white","font-size":"1.8rem"}},Oi={class:"iiiiiiiii"},Bi=["src"],qi=["src"],Ni={class:"texts",style:{overflow:"hidden"}},Ki={key:0,style:{"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},$i={key:1,style:{"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},ea={key:2,style:{"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},ta={key:3,style:{"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},sa={style:{flex:"1",display:"flex","justify-content":"end","align-items":"space-between",gap:"50px"}},ia=Vi((()=>(0,a.Lk)("i",{class:"bi bi-check-lg",style:{color:"white","font-size":"2rem"}},null,-1))),aa=Vi((()=>(0,a.Lk)("i",{class:"bi bi-x-lg",style:{color:"white","font-size":"1.8rem"}},null,-1))),oa={key:0,class:"ooll"},ra=Vi((()=>(0,a.Lk)("h3",{style:{margin:"10px",padding:"10px","border-radius":"8px","box-shadow":"0 2px 4px rgba(0, 0, 0, 1)"}},"No Invitations Received",-1))),na=[ra];function la(e,t,s,i,o,r){const n=(0,a.g2)("b-form-input"),l=(0,a.g2)("b-button"),d=(0,a.g2)("detail"),c=(0,a.g2)("b-modal");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",zi,[(0,a.Lk)("div",Si,[(0,a.Lk)("div",Ji,[(0,a.bF)(n,{style:{},modelValue:o.searchQuery,"onUpdate:modelValue":t[0]||(t[0]=e=>o.searchQuery=e),type:"search",placeholder:"Search",class:"search-input",onInput:e.performSearch},null,8,["modelValue","onInput"])]),e.expanded?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("i",Yi))]),(0,a.Lk)("div",Oi,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.filteredinvitaions,((e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:t,class:"item"},["discussion"===e.type?((0,a.uX)(),(0,a.CE)("img",{key:0,src:e.friendpic,alt:""},null,8,Bi)):(0,a.Q3)("",!0),"group"===e.type?((0,a.uX)(),(0,a.CE)("img",{key:1,src:e.groupicon,alt:""},null,8,qi)):(0,a.Q3)("",!0),(0,a.Lk)("div",Ni,["discussion"===e.type?((0,a.uX)(),(0,a.CE)("span",Ki,(0,h.v_)(e.friendusername),1)):(0,a.Q3)("",!0),"discussion"===e.type?((0,a.uX)(),(0,a.CE)("p",$i,"Friend Invitation")):(0,a.Q3)("",!0),"group"===e.type?((0,a.uX)(),(0,a.CE)("span",ea,(0,h.v_)(e.groupname),1)):(0,a.Q3)("",!0),"group"===e.type?((0,a.uX)(),(0,a.CE)("p",ta,"Group Invitation")):(0,a.Q3)("",!0)]),(0,a.Lk)("div",sa,[(0,a.bF)(l,{onClick:t=>r.acceptinvitation(e),variant:"success"},{default:(0,a.k6)((()=>[ia])),_:2},1032,["onClick"]),(0,a.bF)(l,{onClick:t=>r.refuseinvitation(e),variant:"danger"},{default:(0,a.k6)((()=>[aa])),_:2},1032,["onClick"])])])))),128)),0===s.invitations.length?((0,a.uX)(),(0,a.CE)("div",oa,na)):(0,a.Q3)("",!0)])]),(0,a.bF)(c,{id:"detail-modal",size:"lg","hide-footer":"",modelValue:o.showDetail,"onUpdate:modelValue":t[1]||(t[1]=e=>o.showDetail=e),onHidden:t[2]||(t[2]=e=>o.showDetail=!1),centered:"",class:"slide-in"},{"modal-title":(0,a.k6)((()=>[(0,a.eW)(" Detail ")])),default:(0,a.k6)((()=>[(0,a.bF)(d)])),_:1},8,["modelValue"])],64)}var da={props:["invitations"],components:{detail:Re},data(){return{text:"",searchQuery:"",showDetail:!1,empty:!1}},computed:{filteredinvitaions(){return this.searchQuery?this.invitations.filter((e=>{const t=this.searchQuery.toLowerCase();return"discussion"===e.type?e.friendusername.toLowerCase().includes(t):"group"===e.type&&e.groupname.toLowerCase().includes(t)})):this.invitations}},methods:{async acceptinvitation(e){if("group"===e.type){const s=(0,ge.H9)(ve,"chats",e.id),i=(0,ge.H9)(ve,"users",be.currentUser.uid);try{await(0,ge.mZ)(s,{sentinvitations:(0,ge.C3)(be.currentUser.uid)}),await(0,ge.mZ)(i,{invitations:(0,ge.C3)({id:e.id,type:e.type})}),await(0,ge.mZ)(i,{chats:(0,ge.hq)(e.id)}),await(0,ge.mZ)(s,{senders:(0,ge.hq)(be.currentUser.uid)})}catch(t){ye()({text:"Something went Wrong",duration:3e3,close:!0,gravity:"bottom",position:"right",backgroundColor:"red"}).showToast()}}else{const s=(0,ge.H9)(ve,"users",e.id),i=(0,ge.H9)(ve,"users",be.currentUser.uid);try{await(0,ge.mZ)(s,{sentinvitations:(0,ge.C3)(be.currentUser.uid)}),await(0,ge.mZ)(i,{invitations:(0,ge.C3)({id:e.id,type:e.type})});const t=await(0,ge.gS)((0,ge.rJ)(ve,"chats"),{senders:[e.id,be.currentUser.uid],type:"discussion",createdat:ge.Dc.now(),currentId:0});await(0,ge.mZ)(i,{chats:(0,ge.hq)(t.id)}),await(0,ge.mZ)(s,{chats:(0,ge.hq)(t.id)}),await(0,ge.mZ)(i,{friends:(0,ge.hq)(e.id)}),await(0,ge.mZ)(s,{friends:(0,ge.hq)(be.currentUser.uid)})}catch(t){ye()({text:"Something went Wrong",duration:3e3,close:!0,gravity:"bottom",position:"right",backgroundColor:"red"}).showToast()}}},async refuseinvitation(e){if("group"===e.type){const s=(0,ge.H9)(ve,"chats",e.id),i=(0,ge.H9)(ve,"users",be.currentUser.uid);try{await(0,ge.mZ)(s,{sentinvitations:(0,ge.C3)(be.currentUser.uid)}),await(0,ge.mZ)(i,{invitations:(0,ge.C3)({id:e.id,type:e.type})})}catch(t){ye()({text:"Something went Wrong",duration:3e3,close:!0,gravity:"bottom",position:"right",backgroundColor:"red"}).showToast()}}else{const s=(0,ge.H9)(ve,"users",e.id),i=(0,ge.H9)(ve,"users",be.currentUser.uid);try{await(0,ge.mZ)(s,{sentinvitations:(0,ge.C3)(be.currentUser.uid)}),await(0,ge.mZ)(i,{invitations:(0,ge.C3)({id:e.id,type:e.type})})}catch(t){ye()({text:"Something went Wrong",duration:3e3,close:!0,gravity:"bottom",position:"right",backgroundColor:"red"}).showToast()}}}}};const ca=(0,n.A)(da,[["render",la],["__scopeId","data-v-3f624ccc"]]);var ua=ca,ha={components:{chat:Je,list:Dt,listmodal:bs,invitations:ua},async created(){await this.fetch()},data(){return{user:{username:"error",profileImageUrl:null,chats:[],invitations:[]},chats:[],invitations:[],listeners:{},purge:[],loading:!0,showList:!1,showDetail:!1}},computed:{isMediumAndUp(){return window.innerWidth>=768}},mounted(){window.addEventListener("resize",this.handleResize)},beforeDestroy(){window.removeEventListener("resize",this.handleResize)},async beforeUnmount(){Object.values(this.listeners).forEach((e=>{e()})),this.purge.forEach((e=>e()))},methods:{handleResize(){this.isMediumAndUp&&(this.showList=!1,this.showDetail=!1)},resetModal(){this.isMediumAndUp&&(this.showList=!1,this.showDetail=!1)},async fetch(){const e=(0,ge.H9)(ve,"users",be.currentUser.uid),t=await(0,ge.aQ)(e,(e=>{if(e.exists()){const t=e.data();this.user.username=t.username,this.user.profileImageUrl=t.profileImageUrl,this.user.chats=t.chats,this.fetchdata(t)}else ye()({text:"Something went Wrong",duration:3e3,close:!0,gravity:"bottom",position:"right",backgroundColor:"red"}).showToast()}));this.purge.push(t)},async fetchdata(e){if(this.invitations=[],e.invitations&&0!==e.invitations.length&&e.invitations.forEach((async e=>{if("group"===e.type){const t={...e},s=(0,ge.H9)(ve,"chats",e.id),i=await(0,ge.x7)(s),a=i.data();t.groupicon=a.groupicon,t.groupname=a.groupname,this.invitations.push(t)}else{const t={...e},s=(0,ge.H9)(ve,"users",e.id),i=await(0,ge.x7)(s),a=i.data();t.friendpic=a.profileImageUrl,t.friendusername=a.username,this.invitations.push(t)}})),e.chats&&0!==e.chats.length){const t=(0,ge.P)((0,ge.rJ)(ve,"chats"),(0,ge._M)("__name__","in",e.chats)),s=await(0,ge.aQ)(t,(e=>{e.docChanges().forEach((async e=>{if("added"===e.type){const t=e.doc,s={id:t.id,...t.data()};let i,a;a=s.senders[0]===be.currentUser.uid?s.senders[1]:s.senders[0];const o=(0,ge.H9)(ve,"chats",s.id),r=(0,ge.rJ)(o,"message"),n=(0,ge.P)(r,(0,ge.My)("ID","desc")),l=(0,ge.aQ)(n,(async e=>{const t=e;let o,n,l;if("discussion"===s.type){const e=(0,ge.P)(r,(0,ge._M)("unread","==",!0),(0,ge._M)("author","!=",be.currentUser.uid)),d=await(0,ge.d_)(e);l=d.data().count;const c=(0,ge.H9)(ve,"users",a);if(!(a in this.listeners)){const e=await(0,ge.aQ)(c,(e=>{this.updatestatus({...e.data(),id:e.id})}));this.listeners[a]=e}const u=await(0,ge.x7)(c);if(u.exists()?i={...u.data(),id:u.id}:ye()({text:"Something went Wrong",duration:3e3,close:!0,gravity:"bottom",position:"right",backgroundColor:"red"}).showToast(),t.empty)o="Invitation Accepted",n=s.createdat;else{const e=t.docs[0],s=e.data();"text"===s.type?(o=s.content,n=s.senttime):"image"===s.type?(o="Image Sent",n=s.senttime):(o="document Sent",n=s.senttime)}this.updater({...s,friendusername:i.username,friendpic:i.profileImageUrl,content:o,time:n,unreadmessages:l,status:i.status,friendid:i.id})}else{const e=(0,ge.P)(r,(0,ge._M)("readby","array-contains",be.currentUser.uid),(0,ge._M)("author","!=",be.currentUser.uid)),i=(0,ge.P)(r,(0,ge._M)("author","!=",be.currentUser.uid)),a=await(0,ge.d_)(e),d=await(0,ge.d_)(i);if(l=d.data().count-a.data().count,console.log(l),t.empty)o="Invitation Accepted",n=s.createdat;else{const e=t.docs[0],s=e.data();"text"===s.type?(o=s.content,n=s.senttime):"image"===s.type?(o="Image Sent",n=s.senttime):(o="document Sent",n=s.senttime)}this.updater({...s,time:n,content:o,unreadmessages:l})}}));this.purge.push(l)}}))}));this.purge.push(s),this.loading=!1}else this.loading=!1},updater(e){const t=this.chats.findIndex((t=>t.id===e.id));-1===t?this.chats.push(e):this.chats[t]=e,this.chats=[...this.chats].sort(((e,t)=>t.time.seconds-e.time.seconds)),console.log(this.chats)},updatestatus(e){const t=this.chats.findIndex((t=>"discussion"===t.type&&t.friendid===e.id));-1!==t&&(this.chats[t].status=e.status)}}};const ga=(0,n.A)(ha,[["render",ji]]);var pa=ga;function ma(e,t,s,i,a,o){return null}var fa={components:{loadingPage:Ee},async created(){await this.fetch()},data(){return{filteredfriends:[],searchtag:"",searchQuery:"",searchResults:[],text:"",showDetail:!1,empty:!1,groupformactive:!1,groupMember:[],groupname:"",profilePicture:null,profilePictureUrl:"",defaultProfilePicture:s(5865),user:{username:"error",profileImageUrl:null,chats:[]},all:[],loading:!1,progr:0}},methods:{onFileChange(e){const t=e.target.files[0];t&&(this.profilePicture=t,this.profilePictureUrl=URL.createObjectURL(t))},searchUsers(){if(""===this.searchQuery.trim())return void(this.searchResults=[]);const e=this.searchQuery.trim();try{this.searchResults=[],this.all.forEach((t=>{const s=t,i=s.username.toLowerCase();i.includes(e.toLowerCase())&&this.searchResults.push({id:t.id,...s})}))}catch(t){ye()({text:"Error searching users",duration:3e3,close:!0,gravity:"bottom",position:"right",backgroundColor:"red"}).showToast()}},async fetch(){const e=(0,ge.H9)(ve,"users",be.currentUser.uid),t=(0,ge.rJ)(ve,"users"),s=await(0,ge.GG)(t);this.all=s.docs.map((e=>({id:e.id,...e.data()}))),(0,ge.aQ)(e,(e=>{if(e.exists()){const t=e.data();this.user={...t,id:be.currentUser.uid},this.filteredfriends=this.all.filter((e=>this.user.friends.includes(e.id)))}else ye()({text:"Something went Wrong",duration:3e3,close:!0,gravity:"bottom",position:"right",backgroundColor:"red"}).showToast()}))},async sendinvitation(e){const t=(0,ge.H9)(ve,"users",e),s=(0,ge.H9)(ve,"users",be.currentUser.uid);try{await(0,ge.mZ)(t,{invitations:(0,ge.hq)({id:be.currentUser.uid,type:"discussion"})}),await(0,ge.mZ)(s,{sentinvitations:(0,ge.hq)(e)}),ye()({text:"Invitation Sent Sucessfully",duration:3e3,close:!0,gravity:"bottom",position:"right",backgroundColor:"green"}).showToast()}catch(i){ye()({text:"something went wrong",duration:3e3,close:!0,gravity:"bottom",position:"right",backgroundColor:"red"}).showToast()}},async creategroup(){if(0!==this.groupMember.length)if(""!==this.groupname.trim())try{this.loading=!0,this.progr=30;const e=this.all.filter((e=>[...this.groupMember].includes(e.username))),t=await(0,ge.gS)((0,ge.rJ)(ve,"chats"),{senders:[be.currentUser.uid],type:"group",createdat:ge.Dc.now(),groupname:this.groupname,sentinvitations:[],groupicon:"",currentId:0,admin:be.currentUser.uid});this.progr=50;const s=(0,ge.H9)(ve,"users",be.currentUser.uid);await(0,ge.mZ)(s,{chats:(0,ge.hq)(t.id)}),this.progr=70;let i="";if(this.profilePicture){const e=(0,pe.KR)(ke,`group/${t.id}/${this.profilePicture.name}`);await(0,pe.D)(e,this.profilePicture),i=await(0,pe.qk)(e)}else{const e=await this.fileToBlob(this.defaultProfilePicture),s=(0,pe.KR)(ke,`group/${t.id}/default_group.png`);await(0,pe.D)(s,e),i=await(0,pe.qk)(s)}this.progr=60,await(0,ge.BN)((0,ge.H9)(ve,"chats",t.id),{groupicon:i},{merge:!0}),e.forEach((async e=>{const s=(0,ge.H9)(ve,"users",e.id),i=(0,ge.H9)(ve,"chats",t.id);await(0,ge.mZ)(s,{invitations:(0,ge.hq)({id:t.id,type:"group"})}),await(0,ge.mZ)(i,{sentinvitations:(0,ge.hq)(e.id)})})),this.progr=100,this.loading=!1,this.groupformactive=!1,ye()({text:"group Created",duration:3e3,close:!0,gravity:"bottom",position:"right",backgroundColor:"green"}).showToast()}catch(e){this.loading=!1,ye()({text:e.message,duration:3e3,close:!0,gravity:"bottom",position:"right",backgroundColor:"red"}).showToast()}else ye()({text:"Choose a name for the group",duration:3e3,close:!0,gravity:"bottom",position:"right",backgroundColor:"red"}).showToast();else ye()({text:"Choose at least one friend to add to the group",duration:3e3,close:!0,gravity:"bottom",position:"right",backgroundColor:"red"}).showToast()},handleTagState(e){const t=e.target.value;this.searchtag=t,t?this.filteredfriends=this.all.filter((e=>{const s=e.username.toLowerCase();return s.includes(t.toLowerCase())&&this.user.friends.includes(e.id)&&![...this.groupMember].includes(e.username)})):(console.log([...this.groupMember]),this.filteredfriends=this.all.filter((e=>this.user.friends.includes(e.id)&&![...this.groupMember].includes(e.username))))},Validate(e){const t=this.all.filter((t=>t.username===e));return 1===t.length&&this.user.friends.includes(t[0].id)&&![...this.groupMember].includes(t[0].username)},async fileToBlob(e){const t=await fetch(e),s=await t.blob();return s}}};const ba=(0,n.A)(fa,[["render",ma]]);var va=ba;const ka=e=>((0,a.Qi)("data-v-5184c4fe"),e=e(),(0,a.jt)(),e),wa=ka((()=>(0,a.Lk)("div",{style:{display:"flex","justify-content":"center","align-items":"center"}},[(0,a.Lk)("div",{class:"app-introduction animated-flex d-xl-none"},[(0,a.Lk)("h2",{style:{color:"rgba(255, 255, 233, 0.9)","font-weight":"bold"}},"Welcome to ChatFlow!"),(0,a.Lk)("br")])],-1)));function ya(e,t,s,i,o,r){const n=(0,a.g2)("intro"),l=(0,a.g2)("b-col"),d=(0,a.g2)("ResetPasswordForm"),c=(0,a.g2)("b-row");return(0,a.uX)(),(0,a.Wv)(c,{class:"iii",style:{"overflow-y":"scroll",height:"90vh",width:"100%"}},{default:(0,a.k6)((()=>[(0,a.bF)(l,{cols:"7",class:"animated-flex d-none d-xl-block op"},{default:(0,a.k6)((()=>[(0,a.bF)(n)])),_:1}),(0,a.bF)(l,{cols:"12",xl:"5"},{default:(0,a.k6)((()=>[wa,(0,a.bF)(d)])),_:1})])),_:1})}const Ca=e=>((0,a.Qi)("data-v-670e5366"),e=e(),(0,a.jt)(),e),Aa={class:"login-container"},La=Ca((()=>(0,a.Lk)("h2",null,"Reset Password",-1)));function Ia(e,t,s,o,r,n){const l=(0,a.g2)("b-form-input"),d=(0,a.g2)("b-form-group"),c=(0,a.g2)("b-button"),u=(0,a.g2)("b-form");return(0,a.uX)(),(0,a.CE)("div",Aa,[(0,a.bF)(u,{class:"login-card",onSubmit:(0,i.D$)(n.login,["prevent"])},{default:(0,a.k6)((()=>[La,(0,a.bF)(d,{label:"Email","label-for":"email-input",class:"w-100"},{default:(0,a.k6)((()=>[(0,a.bF)(l,{id:"email-input",modelValue:r.email,"onUpdate:modelValue":t[0]||(t[0]=e=>r.email=e),type:"email",required:"",placeholder:"Enter your email"},null,8,["modelValue"])])),_:1}),(0,a.bF)(c,{type:"submit",variant:"success",class:"ooopp w-100 mb-2"},{default:(0,a.k6)((()=>[(0,a.eW)("Send")])),_:1}),(0,a.bF)(c,{onClick:n.goToLogin,variant:"info",class:"ooooo w-100 mb-2"},{default:(0,a.k6)((()=>[(0,a.eW)("Back to Login")])),_:1},8,["onClick"])])),_:1},8,["onSubmit"])])}var xa={data(){return{email:"",password:""}},methods:{async login(){try{await auth.signInWithEmailAndPassword(this.email,this.password),this.$router.push("/")}catch(e){alert(e.message)}},goToSignUp(){this.$router.push("/signup")},goToResetPassword(){this.$router.push("/reset-password")},goToLogin(){this.$router.push("/")}}};const Fa=(0,n.A)(xa,[["render",Ia],["__scopeId","data-v-670e5366"]]);var Ua=Fa,Ea={components:{ResetPasswordForm:Ua,intro:ai}};const Pa=(0,n.A)(Ea,[["render",ya],["__scopeId","data-v-5184c4fe"]]);var Qa=Pa;function Ra(e,t,s,i,o,r){const n=(0,a.g2)("b-col"),l=(0,a.g2)("b-row"),d=(0,a.g2)("list"),c=(0,a.g2)("EditForm"),u=(0,a.g2)("listmodal"),h=(0,a.g2)("b-modal"),g=(0,a.gN)("b-tooltip");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(l,{class:"d-xl-none mb-3"},{default:(0,a.k6)((()=>[(0,a.bF)(l,{style:{display:"flex","flex-direction":"column"}},{default:(0,a.k6)((()=>[(0,a.bo)(((0,a.uX)(),(0,a.Wv)(n,{title:"show contacts list",style:{cursor:"pointer","margin-right":"15px","margin-left":"20px","margin-top":"20px"}},{default:(0,a.k6)((()=>[(0,a.Lk)("i",{onClick:t[0]||(t[0]=e=>o.showList=!0),class:"bi bi-chat-fill",style:{"font-size":"1.8rem"}})])),_:1})),[[g,void 0,void 0,{hover:!0}]])])),_:1})])),_:1}),(0,a.bF)(l,{class:"oiwvoiwnev",style:{height:"90vh",width:"100%","overflow-y":"scroll","border-left":"1px solid #dddddd35","border-right":"1px solid #dddddd35"}},{default:(0,a.k6)((()=>[(0,a.bF)(n,{cols:"3",class:"animated-flex d-none d-xl-block"},{default:(0,a.k6)((()=>[(0,a.bF)(d,{chats:o.chats,profileimagelink:o.user.profileImageUrl,username:o.user.username},null,8,["chats","profileimagelink","username"])])),_:1}),(0,a.bF)(n,{cols:"12",xl:"9"},{default:(0,a.k6)((()=>[(0,a.bF)(c)])),_:1})])),_:1}),(0,a.bF)(h,{id:"list-modal",size:"lg","hide-footer":"",modelValue:o.showList,"onUpdate:modelValue":t[1]||(t[1]=e=>o.showList=e),onHidden:r.resetModal,centered:"",class:"slide-in"},{"modal-title":(0,a.k6)((()=>[(0,a.eW)(" List ")])),default:(0,a.k6)((()=>[(0,a.bF)(u,{chats:o.chats,profileimagelink:o.user.profileImageUrl,username:o.user.username},null,8,["chats","profileimagelink","username"])])),_:1},8,["modelValue","onHidden"])],64)}const Xa=e=>((0,a.Qi)("data-v-d85c1f32"),e=e(),(0,a.jt)(),e),Ha={key:0,class:"auth-wrapper"},Ma={class:"auth-card"},_a=Xa((()=>(0,a.Lk)("div",{class:"auth-header"},[(0,a.Lk)("i",{class:"fas fa-user-edit fa-3x"}),(0,a.Lk)("h2",null,"Edit Profile"),(0,a.Lk)("p",null,"Update your account details below")],-1))),Wa={class:"profile-picture-upload"},Da={for:"profile-picture-input",class:"profile-picture-label"},Ta=["src"],Ga=Xa((()=>(0,a.Lk)("span",null,"Upload an image",-1))),Za={class:"input-group"},ja=Xa((()=>(0,a.Lk)("div",{class:"input-group-prepend"},[(0,a.Lk)("span",{class:"input-group-text"},[(0,a.Lk)("i",{class:"fas fa-user"})])],-1))),Va={class:"input-group"},za=Xa((()=>(0,a.Lk)("div",{class:"input-group-prepend"},[(0,a.Lk)("span",{class:"input-group-text"},[(0,a.Lk)("i",{class:"fas fa-envelope"})])],-1))),Sa=Xa((()=>(0,a.Lk)("i",{class:"fas fa-save mr-2"},null,-1))),Ja=Xa((()=>(0,a.Lk)("i",{class:"fas fa-lock mr-2"},null,-1)));function Ya(e,t,s,o,r,n){const l=(0,a.g2)("b-form-input"),d=(0,a.g2)("b-form-group"),c=(0,a.g2)("b-button"),u=(0,a.g2)("b-form"),h=(0,a.g2)("loadingPage");return r.loading?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",Ha,[(0,a.Lk)("div",Ma,[_a,(0,a.bF)(u,{onSubmit:(0,i.D$)(n.edit,["prevent"]),class:"auth-form"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",Wa,[(0,a.Lk)("label",Da,[(0,a.Lk)("img",{src:r.profilePictureUrl||r.defaultProfilePicture,alt:"Profile Picture",class:"profile-picture"},null,8,Ta),Ga]),(0,a.Lk)("input",{id:"profile-picture-input",type:"file",onChange:t[0]||(t[0]=(...e)=>n.onFileChange&&n.onFileChange(...e)),accept:"image/*",class:"form-control-file",style:{display:"none"}},null,32)]),(0,a.bF)(d,{label:"Username","label-for":"username-input","label-cols":"12","label-align-sm":"left"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",Za,[ja,(0,a.bF)(l,{id:"username-input",modelValue:r.username,"onUpdate:modelValue":t[1]||(t[1]=e=>r.username=e),type:"text",required:"",placeholder:"Choose a username",class:"form-input",onInput:t[2]||(t[2]=e=>r.changed=!0)},null,8,["modelValue"])])])),_:1}),(0,a.bF)(d,{label:"Email","label-for":"email-input","label-cols":"12","label-align-sm":"left"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",Va,[za,(0,a.bF)(l,{id:"email-input",modelValue:r.email,"onUpdate:modelValue":t[3]||(t[3]=e=>r.email=e),type:"email",disabled:"",required:"",placeholder:"Enter your email",class:"form-input"},null,8,["modelValue"])])])),_:1}),(0,a.bF)(d,{label:"Description","label-for":"desc-input","label-cols":"12","label-align-sm":"left"},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.Lk)("textarea",{id:"desc-input","onUpdate:modelValue":t[4]||(t[4]=e=>r.description=e),required:"",placeholder:"Description",class:"form-control form-input",style:{"border-radius":"7px"},onInput:t[5]||(t[5]=e=>r.textareacchange=!0)},null,544),[[i.Jo,r.description]])])),_:1}),(0,a.bF)(c,{type:"submit",variant:"primary",class:"btn-auth w-100 mb-3"},{default:(0,a.k6)((()=>[Sa,(0,a.eW)(" Save Changes ")])),_:1}),(0,a.bF)(c,{disabled:r.disabled_but,onClick:n.resetpassword,variant:"outline-danger",class:"btn-auth w-100 mb-2"},{default:(0,a.k6)((()=>[Ja,(0,a.eW)(" Change Password ")])),_:1},8,["disabled","onClick"])])),_:1},8,["onSubmit"])]),r.loadingg?((0,a.uX)(),(0,a.Wv)(h,{key:0,progress:r.progr},null,8,["progress"])):(0,a.Q3)("",!0)]))}var Oa={components:{loadingPage:Ee},data(){return{initial:"",textareacchange:!1,textareainitial:"",changed:!1,loadingg:!1,progr:0,disabled_but:!1,loading:!0,username:"",description:"",email:"",profilePicture:null,profilePictureUrl:"",defaultProfilePicture:s(5439)}},async created(){try{const e=(0,ge.H9)(ve,"users",be.currentUser.uid),t=await(0,ge.x7)(e);if(t.exists()){const e=t.data();this.username=e.username,this.initial=e.username,this.defaultProfilePicture=e.profileImageUrl,this.email=e.email,this.description=e.description,this.textareainitial=e.description,this.loading=!1}else this.$router.push("/"),ye()({text:"Something went Wrong",duration:3e3,close:!0,gravity:"bottom",position:"right",backgroundColor:"red"}).showToast()}catch(e){ye()({text:e.message,duration:3e3,close:!0,gravity:"bottom",position:"right",backgroundColor:"red"}).showToast(),this.$router.push("/")}},methods:{async edit(){if(this.textareacchange&&this.textareainitial!==this.description.trim()||this.changed&&this.initial!==this.username.trim()||this.profilePicture){this.loadingg=!0;try{if(this.changed&&this.initial!==this.username.trim()){this.loadingg=!0;const e=(0,ge.P)((0,ge.rJ)(ve,"users"),(0,ge._M)("username","==",this.username.trim())),t=await(0,ge.GG)(e),s=[];if(t.forEach((e=>{s.push(e.id)})),this.progr=30,0!==s.length)return ye()({text:"this Username is Already used",duration:3e3,close:!0,gravity:"bottom",position:"right",backgroundColor:"red"}).showToast(),void(this.loadingg=!1)}this.progr=60;let e="";if(this.profilePicture){const t=(0,pe.KR)(ke,this.defaultProfilePicture);await(0,pe.XR)(t);const s=(0,pe.KR)(ke,`profileimages/${be.currentUser.uid}/${this.profilePicture.name}`);await(0,pe.D)(s,this.profilePicture),e=await(0,pe.qk)(s),this.progr=80,await(0,ge.BN)((0,ge.H9)(ve,"users",be.currentUser.uid),{email:this.email,username:this.username,description:this.description,profileImageUrl:e},{merge:!0})}else await(0,ge.BN)((0,ge.H9)(ve,"users",be.currentUser.uid),{email:this.email,username:this.username.trim(),description:this.description.trim()},{merge:!0});this.progr=100,this.$router.push("/"),ye()({text:"Profile edited Successfully",duration:3e3,close:!0,gravity:"bottom",position:"right",backgroundColor:"green"}).showToast()}catch(e){this.loadingg=!1,ye()({text:e.message,duration:3e3,close:!0,gravity:"bottom",position:"right",backgroundColor:"red"}).showToast()}}},goToLogin(){this.$router.push("/")},onFileChange(e){const t=e.target.files[0];t&&(this.profilePicture=t,this.profilePictureUrl=URL.createObjectURL(t))},async resetpassword(){try{this.disabled_but=!0,await(0,he.J1)(be,this.email),ye()({text:"An email was sent to your mailbox to reset your password",duration:3e3,close:!0,gravity:"bottom",position:"right",backgroundColor:"green"}).showToast(),this.disabled_but=!1}catch(e){ye()({text:"Failed to send password reset email. Please check the email address and try again.",duration:3e3,close:!0,gravity:"bottom",position:"right",backgroundColor:"red"}).showToast(),this.disabled_but=!1}}}};const Ba=(0,n.A)(Oa,[["render",Ya],["__scopeId","data-v-d85c1f32"]]);var qa=Ba,Na={components:{chat:Je,list:Dt,detail:Re,listmodal:bs,EditForm:qa},async created(){await this.fetch()},data(){return{user:{username:"username",profileImageUrl:null,chats:[]},chats:[],loading:!0,listeners:{},purge:[],showList:!1,showDetail:!1}},computed:{isMediumAndUp(){return window.innerWidth>=768}},mounted(){window.addEventListener("resize",this.handleResize)},async beforeUnmount(){Object.values(this.listeners).forEach((e=>{e()})),this.purge.forEach((e=>e()))},beforeDestroy(){window.removeEventListener("resize",this.handleResize)},methods:{handleResize(){this.isMediumAndUp&&(this.showList=!1,this.showDetail=!1)},resetModal(){this.isMediumAndUp&&(this.showList=!1,this.showDetail=!1)},async fetch(){const e=(0,ge.H9)(ve,"users",be.currentUser.uid),t=await(0,ge.aQ)(e,(e=>{if(e.exists()){const t=e.data();this.user.username=t.username,this.user.profileImageUrl=t.profileImageUrl,this.user.chats=t.chats,this.fetchdata(t)}else ye()({text:"Something went Wrong",duration:3e3,close:!0,gravity:"bottom",position:"right",backgroundColor:"red"}).showToast()}));this.purge.push(t)},async fetchdata(e){if(e.chats&&0!==e.chats.length){const t=(0,ge.P)((0,ge.rJ)(ve,"chats"),(0,ge._M)("__name__","in",e.chats)),s=await(0,ge.aQ)(t,(e=>{e.docChanges().forEach((async e=>{if("added"===e.type){const t=e.doc,s={id:t.id,...t.data()};let i,a;a=s.senders[0]===be.currentUser.uid?s.senders[1]:s.senders[0];const o=(0,ge.H9)(ve,"chats",s.id),r=(0,ge.rJ)(o,"message"),n=(0,ge.P)(r,(0,ge.My)("ID","desc")),l=(0,ge.aQ)(n,(async e=>{const t=e;let o,n,l;if("discussion"===s.type){const e=(0,ge.P)(r,(0,ge._M)("unread","==",!0),(0,ge._M)("author","!=",be.currentUser.uid)),d=await(0,ge.d_)(e);l=d.data().count;const c=(0,ge.H9)(ve,"users",a);if(!(a in this.listeners)){const e=await(0,ge.aQ)(c,(e=>{this.updatestatus({...e.data(),id:e.id})}));this.listeners[a]=e}const u=await(0,ge.x7)(c);if(u.exists()?i={...u.data(),id:u.id}:ye()({text:"Something went Wrong",duration:3e3,close:!0,gravity:"bottom",position:"right",backgroundColor:"red"}).showToast(),t.empty)o="Invitation Accepted",n=s.createdat;else{const e=t.docs[0],s=e.data();"text"===s.type?(o=s.content,n=s.senttime):"image"===s.type?(o="Image Sent",n=s.senttime):(o="document Sent",n=s.senttime)}this.updater({...s,friendusername:i.username,friendpic:i.profileImageUrl,content:o,time:n,unreadmessages:l,status:i.status,friendid:i.id})}else{const e=(0,ge.P)(r,(0,ge._M)("readby","array-contains",be.currentUser.uid),(0,ge._M)("author","!=",be.currentUser.uid)),i=(0,ge.P)(r,(0,ge._M)("author","!=",be.currentUser.uid)),a=await(0,ge.d_)(e),d=await(0,ge.d_)(i);if(l=d.data().count-a.data().count,console.log(l),t.empty)o="Invitation Accepted",n=s.createdat;else{const e=t.docs[0],s=e.data();"text"===s.type?(o=s.content,n=s.senttime):"image"===s.type?(o="Image Sent",n=s.senttime):(o="document Sent",n=s.senttime)}this.updater({...s,time:n,content:o,unreadmessages:l})}}));this.purge.push(l)}}))}));this.purge.push(s),this.loading=!1}else this.loading=!1},updater(e){const t=this.chats.findIndex((t=>t.id===e.id));-1===t?this.chats.push(e):this.chats[t]=e,this.chats=[...this.chats].sort(((e,t)=>t.time.seconds-e.time.seconds)),console.log(this.chats)},updatestatus(e){const t=this.chats.findIndex((t=>"discussion"===t.type&&t.friendid===e.id));-1!==t&&(this.chats[t].status=e.status)}}};const Ka=(0,n.A)(Na,[["render",Ra],["__scopeId","data-v-c6560406"]]);var $a=Ka;const eo=e=>((0,a.Qi)("data-v-a9776d0c"),e=e(),(0,a.jt)(),e),to={class:"loading-page"},so=eo((()=>(0,a.Lk)("div",{class:"loading-icon"},[(0,a.Lk)("i",{class:"bi bi-file-earmark-excel-fill",style:{"font-size":"5rem"}})],-1))),io=eo((()=>(0,a.Lk)("h1",null,"404 - Page Not Found",-1))),ao=eo((()=>(0,a.Lk)("h5",null,"The requested page does not exist.",-1)));function oo(e,t,s,i,o,r){const n=(0,a.g2)("b-button");return(0,a.uX)(),(0,a.CE)("div",to,[so,io,ao,(0,a.bF)(n,{onClick:t[0]||(t[0]=e=>this.$router.push("/")),variant:"secondary",class:"ooopp w-50 mb-2"},{default:(0,a.k6)((()=>[(0,a.eW)("Back to Home")])),_:1})])}var ro={props:["progress"]};const no=(0,n.A)(ro,[["render",oo],["__scopeId","data-v-a9776d0c"]]);var lo=no;const co=[{path:"/",component:xs,meta:{requiresAuth:!0}},{path:"/login",component:ni},{path:"/signup",component:Wi},{path:"/chat/:chatid",component:Zi,props:!0,meta:{requiresAuth:!0}},{path:"/invitations",component:pa,meta:{requiresAuth:!0}},{path:"/add-user-group",component:va,meta:{requiresAuth:!0}},{path:"/reset-password",component:Qa},{path:"/profile",component:$a,meta:{requiresAuth:!0}},{path:"/:catchAll(.*)",component:lo}],uo=(0,c.aE)({history:(0,c.LA)(),routes:co});uo.beforeEach(((e,t,s)=>{const i=e.matched.some((e=>e.meta.requiresAuth));be.currentUser;i?be.onAuthStateChanged((e=>{e?s():s("/login")})):s()}));var ho=uo;const go=(0,i.Ef)(d);go.use(At.Ay),go.use(ho),go.mount("#app")},2233:function(e){e.exports="data:image/png;base64,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"},4289:function(e){e.exports="data:image/png;base64,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"},5865:function(e,t,s){e.exports=s.p+"img/default_group.c1498037.jpg"},5439:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAWgAAAFpBAMAAABDl69DAAAAIVBMVEXu7u4AAAD////4+PglJSVlZWWHh4dGRkba2tqlpaXBwcGu6sVZAAAUGklEQVR42sydz3sbRxnH16s+gXKy7NUvn9azlizppKwf6FNOlaFp6CkyT9okJ6QmgfZUmYY2PSFRGh5OWLSQcMKiLSF/JXYk2/POzGq/78xI8pyirLT78ew77+/ZDcRsxMFsOHwsnP3zJ/94fPfuh+fj7pO7d+9+8PjxixevXv5RXA0PF3L7sfwxPSP+bbdoHtF7Hzy/ftCpaH6bRXwB/od/Xyvo9GySi8B47/n1gRY/h5DPR+V3QnSuA3TzYZExKs9Fsnbo5Nsic7z7n/PJXif0m8MifzwNkzVCxw+LVqPyN7Em6IK40S3ajqfrgU7jb4oOozReA7RoD4tOI/rNqqEL4uui8/hytdCh+G/Rw7i1SmhrraELdmIFPR/h/P+Rj2mzV/Q0KlPGddWPnG+nrkuQLMfpSqDTVrfocUSTFUB7Zr6gXiq0d+Y59TKhl8A8k+slQocY8y9no8vQIUuEztUb0ZOPX4aXkfdB8JdXLx59ng9fGcdLg45zmJ88P/9iOv9toXBwMP/dXx99lmNlws6yoBfalOj+eBb/mX+bE63XxJKgTxbd4E+ESBaeSiQ/LLpR74ulQD9bMMufAFcqCPH1Auw7yRKg69nXu59iVzrHzhaSSewdup15tXcZTk9BJP/MViEdz9BJ1iKMHlxqOPBUmXqzLFBozJHNXITnoR7TkU/jrMn+1GsQIH66IGJiRx+FTMme+ITOEOi5W8kPmbJEpJJ2/EH3F2UBbOK8rOBnJ/EG/YY5LA0dEi6hMIeZR7En6HaGOMdueUBjricad/xAG4XjizM/wzF5aUxD1BIv0Pumc98THtLEzzIFxBU6NmmOO8JLQt5EXQk9QI8ymT1UEZ5laBBH6FaWbPip15ioJx1X6L5pDforMqXfGfS/cISum9z12B90YvJqfh+7QfcMgZFP6LgQ9wzK2gU63DfcO7/QQdjU/ZCqU9a0qydWuPFF/kfDWp8iwXnGYd3pGMSBd2jDwpnZRSvoWFccSbAEaKGrkEHHFnpkCIiWAq2v93JiCd3McMGWAK07kkcdO+iRUaCXAi3eMlgYG2jtr9/xSanmn05M3h4feqQFcEuELjS7hqlmQ2sTPRBLhA7CumGq2dAjTTiWCh1oAlJK2NCq6ojCJUPrAnLU4UKrE30klgwdhG9pU82EbmpmZenQgea7D1Ie9IYaTawAutAyzhQMnXSNvuJyoYP01DhVaNZ0T7Xffns8sz6qkf9OzAkChmr8sxpoLccyZkArv60wI9kDYdvGq87WOzEO3TNmBdELi/h/jz4/L9k++fjlZc0L/K1iFyMBQzfURcyCfvNDpZc34fTa9g0eKgR9ojodDOi3h+Y2TTQ4b5iCAQC6rWlLGNpcu7qfJnhFRpnqCQg90rw7FDqrcFWaws2l6lRXYwy6q5klEDq7sSL6CFYmylRHIQS9r000Bi1+tqhifweufSlTfdxBoHu6/YdqPzcWd0f8GlXbylSXYwC6pU801C/byOtEGYDQ6lRPAeiRlrpDroQ0Ck3Qv5/e6804H7qr+/6AIDaBBsPXyVAAWgkXK0kutPIDUBAzyqMG/xhaHnQGBnlZ05Baw1/EmE/8FdYWdjvB3Os9xZnPCQKUMCvEHPkW2sw2iCFoGoNEedD7ujkCoOGO2UqKBTIjg9eUDd1XtQ0AnX5VhMdtrKOlbQxgMqCbpr6zHOhCm9OjOcFaLenkpQuh9xR9B/WA9znQNSy1R5XY0ULovqLvkF6qOq8ddoB1KXUN8mGGpvWKbQhaMHvtS1g+kiReonQBNNUdYyjDwpzoCyObd+a2QT7M0Ceq9AHd9uxNDSUImi7Fme41Q2szkt/UyJ5oMJdZIHc9SjKh69QOQVsE+nzoMnTmWA8VjdAjLX2Xe+pW0WJAmwDCU8U/zYAealYgV/JObaCxogK576Us6LbulOadumm3dSGE0tVd1aMwZE0Le9r9yI379+ygD6FOMyKtx+YggCqZKZTosNwQVYLSIA1VARugE+W0AHSjaDkmUO5mqCgzAzQh2EbaJ42dZNCoIt2TyUZGokvqcNkweNI5p7beXlRJkJkm07hlhO7RCDgf2sYaKr5eTpzbNedBr77d1HVHXofTyB66CkGTC6QG6LpmNfOgU4fNZxUIuk5dFg2aTFsE1RwaRYcxgbr2yN03QPcMUfhCaK1AyrMvUAnmhLi0GnTMrgyFPRfoMjTTxOKGGjQRnxSBbhadRook3NrGqby8ERvscta+GzSU2iR3c1uD7hM9juQ2T92gtyHokZJez16nEyiLPHSDxjLfRGoTJWvaogoPyLg5ivQ8uZl7IZMZnR8lvnQtRqDrrtADCLqvq8lL6FPqogPQN12htzoI9O6ClNqQengAdN8VugY1CDfUBMHV0abi4QHQXVfoCtbVrOS8pKN1JduXf6520XmMIei+EiheHiVuxJlIA+equ0MfQdC7mm6/gO4rbinvXLY+EzQ7Dd1h0T3jCNsKfeoOjcmh0Ffi7GCbvai5WWmjTYzZamoqHa2z1acoehiYmtrQVuLMtNxkG6qmD2jMINRpSH5xlJRpMZeg4QN6EHCdnJoEPVTSk/nn2vMBfYg1dQ6NadFmXqFgsUtgPTYhJ4coqvAya9rQPKncDVenPqB3oKYE4oEOLg/vaaF9LnTfBzTYPNdSDJLe0wZubRv6gK5g0Aea9CrquwRCd31ARxi0HN2WY0MjXhWD7hS9jBSDliQhuoBuchM/cdD0Az3GOv72FH82UEzOAINu+YGeYtAtVX0oyiPEoBt+oCcYdIcaJHU7O5aBVdIRLql1CFpeiZvzhtm+Hu/mnWvfD/QRCH2qeM5UeWyC0Ht+oI8x6MKuEg7TzpRjsJ98d6XQRBoPtI7YyWqhD0HoplJ3o+00YxB6Y7XQQonhiZcZxauF3kKhe4rLJC/NMrrhyhc0uLNLZqyqzULVawotB7Hl19Bd+XZdT2jZLrzuFuwQZX9NoVvE46eJmsl1hSY6T1DFHV5XaDlvNxDEWY3g7Zo3PelpeFe5rPMEyS6VYOjdVUOfEG1BPKjrCz2SEw9ETW+uGvoYhZadnfOnLg5JgAhCe3JNj+C9zkRRk3V5DEPvrxpaju+oBpzA0L7CLRhatiYp+TSGoX0FtjB0h3jUDZoSA6F9pRBg6JT8qXWavQFjxLYf6DHqT5Mk9ZFsEEs4tKe0GGPLcU9WlLs0uYfuOV45tGwSg5u0rgdC+8maVhjQkkncDkY094tC93xAlxjQkl9ZDSTXY7uDQ5/4gOY8em9Xhj6huT0UeuQDusqAlhTGjgx9jEMXvDjUWwxoyXGoBX2a+kW3pHtxPg4Z0JI9KQc92jOBQnux40cM6EYG9JQB7cUkThnQkuNQCoa0Ko5Cd/zYFhy6nQFdYED7KCRGHGjJha7I0AkH2kPJtsyBjmXoLi3RwdAjL2qa8WAZ6Q5J0BXWY6o8hLZbUOPV/OOBGbrEgl5Zi9vFxkczdJkF7UHnTTnQkl9pD+2h8+rAA3SNB+3snJZiFvTQCL3Dg3ZWHzu20MWgaAvtnGQ67HiArvKgGz6Ux6qhnb2PMQ+6Z4Te5EELR++jEvuA3mZCO4aJtbVAOxry7c46oB1X4iDgQfeN0FtM6MTDOlw5tJtNLMVeoF8LGepPB64udRW/kNbxKKs8JrRbGuF4TdBO3ul4TdAum/sqYk3QLkK94wm6GjOhXYT6mAud+IJuOos0Y6bNFnGHDW2vqUvx+qCt2z6qa4Ru2DsebGhzEFDjQ9uG5NGBG3SXVOS457L0qWuxr5m2gbZUescW76Ez5z1KFtCWSm8cuEDL4lGxgLbb08woDefNdMT1p4X6wCmOOWReKCtragNt5+mFFhfqmKGLNtA2j56rCVfoodsE2MjHsQ10Vs1lbHEuG6dJOMohgZ7YQPNL+1Ur6JYMLfkhAxto/mOvBlbQDbmO2CNVX5v3mTD7VUrCCrouQ/dJfd0Cmvs4pkM76H25Nn5CszV8aK6qTu2g9+TWiVOa67WATk/4y5BveuVeK7mHyfLNWgVWKDC1g5Yj/2qwQWvVFtCsJ99ebMNjQ5/KLW67dF3bQIcMrZfzVqps6L4MTbcEWL7RCZ7qchJaQvfkXitl1xzbzT3/iE/1gHnmq49duSzWoMVqK2hYqsvCGpqE8mRvjvW7aMGpnlhDx2RuY1qOtIMG3eodYQ0tz22B7E88tIYuQF3gY3toSYqjOJDzCZv2b5jXXgNnGO8Ie+h9Uq2R4+md2P7VavEQc+8soXdppueU/g220KG3N+cYP45ISlr+GyIH6FwBuS1/ueOQf9s++/EeXZfW0EHcA3z/2ZeTlJvqHcoGkb4qZ8orFMV9eW2F7QUxTDSVfhu+UeJWAmh9mmxZOWJAF8TbXUWLLRDrj6SpLZxF8NGEBa3sdie25hCHDsX3F67m1dEfZTF/IT+PfBY1PLDN3heU1z/hVYW0+fBSJ0hHn5mZ3xeyzZ8T3Apx6H2iLQJSzKihO/Sv3iio7KD4s4n5SyFvkbi8YAV3RXaVNLqcbamgbq7E9mksHxU39NV4L3Nb4AOBxQQy42yHvpwCwCLZ5BtZL4zJhUVb0XzR3+mpyNuMb4GPFRiSnIHy7B3kTUqpgqWEfan4XsZ6OlYCSmqDKmME+oCmL2nC6eJlQIugdQEYqF9OfvhsjnT/AvnyaZOqWpy/OXHxdemGfDUv/vqxhAvzD4alVjF9+cev/vXqT+fvViWnKhj8qnv50HRDvtKZnPWGq6ut0ESclQSM8uUzYq0xM/3O8PNf5ULf1KJvOdAt/b+58/lt24biOCsPaI/RJltZTtpTstg+GcaG7Vi7+9HttBgtut5sd8iGnRoDA9KdFh+6H6fGwDr0agzbsL9ylmfLJEVSpESK790UR9AnzhP5+Pj4fWroIJnVSoRKQsFOWaP720Jyhskwp8qbu5KYKA70tg1kQXd7qX7uVSENxox5a9XN/at62yjyDd54naruDYtZUnrbdaF4sKrZ5HOdw713FVHgKpXfy8R0u0/pnx0NpA9WN8icl8tdKNc2m6FPeu8pl8Ak7G7XrmxVdHPJcipal81q/ZItgynI7r0Ji/uG9CQZyaBLl4DxUj3ylHcF3VCXllq2hRtUy8pH8ttLVSVmopE5m4L4Xr7KbDtN3SlM5HwGWitvHi/lL1NXK9s3FWaveyFfEAvsUdD/f8rHtZq5/ngtiYmhp1l3+EzQ/IbZFJ7kH/cLMRv7YH3lg6nwQC681N62mxcbOjHCr1STqpCd27kH97UfuYlEhzx0CskfBtVNq6QATY8T1N90wZf50Q/uXoUGFr/K4t/BYX0Fv5rdv+ZrZbpceQsR9BJb8KcXTSsGP/3+l1Ye6N3765Fp6eySO3N/FnJVmruPaVc/slHwE32ytVGVeztDJmnGhEYLyvN67BYDDf1n2Lh9AQz0jN2rOLg8X46RQ98NPdg13UqMXh9uTwPm0BdcRL+fkXuhF5tT0PQcsV+jFEOSt3PoltnAYc+iQ/E9M7UcM9Cn3PSye0lnoSc79IpiAqOFdM7Lz6APfw692f08aTgqvoeiVnO7FJsvhz4UVGUYXB8iBnrG1r5k0OmFT+j2Lm45Lc6HOfR7rFMnZl3EXdjDos7MO7tU0t7O2P9CYOVgeE0HGWQYI25RS0XbbH/ereTXzDd0J+X1wLjlBatRNB5Y02mrY5OEFeZrAw99w2T0ArjwD93eLBlviylDCppecsVpcB4isAXr0ouCezCFruu6R5XtWDxkXHpZgGYwF2+FKGxMu3ScFKEZpx7hgI5mTLRUhD4PkVtBT3Rz3cUOvRRAYxjklANgIoK+gxv6WAh9hht6QkTQgBs6EEPfYmbOYukcGsRLSHQ2phIbdFqkjxl6LYG20+LJURgCMugbvNBHMmhbTXyc5ZyE0HVatTuOnEAKbadDnAs7kUMTtJHeRAGdYIUeKqDtSPDat3dBAd1C6h8LFTRW/wiU0Dj9g29hxrflOkfsHTJoAoi94wDNl5IgnF9OJOUv+XUL4aJrUgZN6ndsdxB3lEHji0+Py6FJDxv0SgPa5PBpI0ka0IDGtr4d60ATZEm9QAsa11CtqGJlrlEtFeea0HV08JykDnSggw9wvYZa0Jii6kAbGs+seALa0HhmxZUYWnxoaoaDuZMKg34JNJIAdTIwgcaxaxSnxAgax954YgSdYNgcj8AQGsMEMzaFJon3ZVc0NIYOvBci3AdjaO9fdRRUgPb9VT+ACtCev+poWAna71f9ACpBk3Tkc4yuCB185DtRWgGa+ItAYuWBfaI8j+ct2JvodBGQfewpru6kpAa0pyXMalAHWkepyMXKkNSBJl0Pw95mAq8H7WPYW0BNaA/DnrZAokKxofF3cVUfuvEDDQ/BArSGaphNa4MV6KDR1O/cDrRYlMOlc9iAbqVXzTqHDegGT3Gt7EErRS5s2rWmvqyexFUz4V5HUwBLE7rVRAwSB3ahGxn3tKXG9JVLnR8DfQ7WoYnrmvAvwQF0y1hfwDi2sw9Ngr7Dl3EnjGYdmgzdzTF7XUv70JoqMNXDJCfQBD50w/xV6hIanAx8XwNxCu2C+hqIY2j71NdAnEPD39Z9owFosXZpPWZD6AqNAWxSP6vWNqDCb8P7lubGveZpE9CBQqPQaEW4rtqgoRK0psCZ2j4LUtIotIVB5EdISNPQIilhk7DuFQxI89DQfVTPNYgPaGClhE1GjSkkxBN0C/rfVGF+EVRtHGMBOtNtfjkyH+iqUlqCJi0jCb/MM76rTmkLOrv4WN9HoqdLwACd+Uj/Wz3kF7yGtj/o7LL7e6lvZ7Lfae0H2YTOlBNfP5GDf/70n0z2m9iBrtGhgzvLmJXCpPd+e/P68vHGfnjyeGuXl5dv/v1pmLtF/QcR8h8N2aGE+CjflgAAAABJRU5ErkJggg=="},8200:function(e,t,s){e.exports=s.p+"media/sound.018d07b5.mp3"}},t={};function s(i){var a=t[i];if(void 0!==a)return a.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,s),o.exports}s.m=e,function(){var e=[];s.O=function(t,i,a,o){if(!i){var r=1/0;for(c=0;c<e.length;c++){i=e[c][0],a=e[c][1],o=e[c][2];for(var n=!0,l=0;l<i.length;l++)(!1&o||r>=o)&&Object.keys(s.O).every((function(e){return s.O[e](i[l])}))?i.splice(l--,1):(n=!1,o<r&&(r=o));if(n){e.splice(c--,1);var d=a();void 0!==d&&(t=d)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[i,a,o]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};s.t=function(i,a){if(1&a&&(i=this(i)),8&a)return i;if("object"===typeof i&&i){if(4&a&&i.__esModule)return i;if(16&a&&"function"===typeof i.then)return i}var o=Object.create(null);s.r(o);var r={};e=e||[null,t({}),t([]),t(t)];for(var n=2&a&&i;"object"==typeof n&&!~e.indexOf(n);n=t(n))Object.getOwnPropertyNames(n).forEach((function(e){r[e]=function(){return i[e]}}));return r["default"]=function(){return i},s.d(o,r),o}}(),function(){s.d=function(e,t){for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){s.f={},s.e=function(e){return Promise.all(Object.keys(s.f).reduce((function(t,i){return s.f[i](e,t),t}),[]))}}(),function(){s.u=function(e){return"js/"+e+".e3e22705.js"}}(),function(){s.miniCssF=function(e){}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="CS-Chat-App:";s.l=function(i,a,o,r){if(e[i])e[i].push(a);else{var n,l;if(void 0!==o)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var u=d[c];if(u.getAttribute("src")==i||u.getAttribute("data-webpack")==t+o){n=u;break}}n||(l=!0,n=document.createElement("script"),n.charset="utf-8",n.timeout=120,s.nc&&n.setAttribute("nonce",s.nc),n.setAttribute("data-webpack",t+o),n.src=i),e[i]=[a];var h=function(t,s){n.onerror=n.onload=null,clearTimeout(g);var a=e[i];if(delete e[i],n.parentNode&&n.parentNode.removeChild(n),a&&a.forEach((function(e){return e(s)})),t)return t(s)},g=setTimeout(h.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=h.bind(null,n.onerror),n.onload=h.bind(null,n.onload),l&&document.head.appendChild(n)}}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.p="/"}(),function(){var e={524:0};s.f.j=function(t,i){var a=s.o(e,t)?e[t]:void 0;if(0!==a)if(a)i.push(a[2]);else{var o=new Promise((function(s,i){a=e[t]=[s,i]}));i.push(a[2]=o);var r=s.p+s.u(t),n=new Error,l=function(i){if(s.o(e,t)&&(a=e[t],0!==a&&(e[t]=void 0),a)){var o=i&&("load"===i.type?"missing":i.type),r=i&&i.target&&i.target.src;n.message="Loading chunk "+t+" failed.\n("+o+": "+r+")",n.name="ChunkLoadError",n.type=o,n.request=r,a[1](n)}};s.l(r,l,"chunk-"+t,t)}},s.O.j=function(t){return 0===e[t]};var t=function(t,i){var a,o,r=i[0],n=i[1],l=i[2],d=0;if(r.some((function(t){return 0!==e[t]}))){for(a in n)s.o(n,a)&&(s.m[a]=n[a]);if(l)var c=l(s)}for(t&&t(i);d<r.length;d++)o=r[d],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(c)},i=self["webpackChunkCS_Chat_App"]=self["webpackChunkCS_Chat_App"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=s.O(void 0,[504],(function(){return s(1564)}));i=s.O(i)})();
//# sourceMappingURL=app.014eb78c.js.map